<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="13">
  <HTTPTask id="1461" hostname="diperf-wf1f52214.dispatcher.int.sap.hana.ondemand.com" path="/resources/~5cfddba6c4c93a9574da8795b231db9795ec15e1~/sap/watt/ideplatform/plugin/aceeditor/control/lib/ace-noconflict/mode-xml.js" url="https://diperf-wf1f52214.dispatcher.int.sap.hana.ondemand.com/resources/~5cfddba6c4c93a9574da8795b231db9795ec15e1~/sap/watt/ideplatform/plugin/aceeditor/control/lib/ace-noconflict/mode-xml.js" ip="172.16.59.30" port="443" connectionId="47" origin="Primary" frame="1" startDateTime="2017-09-26T13:06:49.480+03:00" startTime="2527847344" endTime="2527847454">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Host" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZGlwZXJmLXdmMWY1MjIxNC5kaXNwYXRjaGVyLmludC5zYXAuaGFuYS5vbmRlbWFuZC5jb20=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzYxLjAuMzE2My4xMDAgU2FmYXJpLzUzNy4zNg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9kaXBlcmYtd2YxZjUyMjE0LmRpc3BhdGNoZXIuaW50LnNhcC5oYW5hLm9uZGVtYW5kLmNvbS8=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsaGUtSUw7cT0wLjgsaGU7cT0wLjYsZW47cT0wLjQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QklHaXBTZXJ2ZXJkaXNwYXRjaGVyLmludC5zYXAuaGFuYS5vbmRlbWFuZC5jb209ITFFakREcmViOUJtQUp1Wkk1ZmlGVzBuWUdTZlhMcllyeE9IUU9PTUdnWGluK3dQbmgvSnArak9kRWVtYm13ZEF2bGpGMzhNb0dXN0lBSUk9OyBKU0VTU0lPTklEPUNGMkQ5N0Y5RkY0N0UxM0REQzZEQjlFRDAzMUFGNTlDRThBRUQ0RENEQzVBMzNBMDk2Mzc2RjAzRTI2NTlBRjU7IEpURU5BTlRTRVNTSU9OSURfd2YxZjUyMjE0PTZvMVQ5R3dyb0oxbjR6bUZROFUxVVhqQnFpSzlGdVdhZDFXRmdienZOaUklM0Q7IF9wa19pZC43YTdhYjJmZS0zY2Y5LTRlYWItODkyYS05ZGM4MGNhZDBjYTUuMDA3OT0zMjkxM2FiOWEyM2RmMjY4LjE1MDY0MjAyNjQuMC4xNTA2NDIwMjY0Li47IF9zd2FfcmVmLjdhN2FiMmZlLTNjZjktNGVhYi04OTJhLTlkYzgwY2FkMGNhNS4wMDc5PSU1QiUyMiUyMiUyQyUyMiUyMiUyQzE1MDY0MjAyNjQlMkMlMjJodHRwJTNBJTJGJTJGMTAuMjYuMTU2LjEyNSUzQTUwMDAwJTJGc2FtbDIlMkZpZHAlMkZzc28lMjIlNUQ7IF9zd2FfaWQuN2E3YWIyZmUtM2NmOS00ZWFiLTg5MmEtOWRjODBjYWQwY2E1LjAwNzk9NDVhZjM3ZmY4NDY5N2VhMC4xNTA2NDIwMjY0LjEuMTUwNjQyMDI5MS4xNTA2NDIwMjY0LjsgX3N3YV9zZXMuN2E3YWIyZmUtM2NmOS00ZWFiLTg5MmEtOWRjODBjYWQwY2E1LjAwNzk9Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9yZXNvdXJjZXMvfjVjZmRkYmE2YzRjOTNhOTU3NGRhODc5NWIyMzFkYjk3OTVlYzE1ZTF+L3NhcC93YXR0L2lkZXBsYXRmb3JtL3BsdWdpbi9hY2VlZGl0b3IvY29udHJvbC9saWIvYWNlLW5vY29uZmxpY3QvbW9kZS14bWwuanMgSFRUUC8xLjENCkhvc3Q6IGRpcGVyZi13ZjFmNTIyMTQuZGlzcGF0Y2hlci5pbnQuc2FwLmhhbmEub25kZW1hbmQuY29tDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNjEuMC4zMTYzLjEwMCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQ6ICovKg0KUmVmZXJlcjogaHR0cHM6Ly9kaXBlcmYtd2YxZjUyMjE0LmRpc3BhdGNoZXIuaW50LnNhcC5oYW5hLm9uZGVtYW5kLmNvbS8NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZSwgYnINCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsaGUtSUw7cT0wLjgsaGU7cT0wLjYsZW47cT0wLjQNCkNvb2tpZTogQklHaXBTZXJ2ZXJkaXNwYXRjaGVyLmludC5zYXAuaGFuYS5vbmRlbWFuZC5jb209ITFFakREcmViOUJtQUp1Wkk1ZmlGVzBuWUdTZlhMcllyeE9IUU9PTUdnWGluK3dQbmgvSnArak9kRWVtYm13ZEF2bGpGMzhNb0dXN0lBSUk9OyBKU0VTU0lPTklEPUNGMkQ5N0Y5RkY0N0UxM0REQzZEQjlFRDAzMUFGNTlDRThBRUQ0RENEQzVBMzNBMDk2Mzc2RjAzRTI2NTlBRjU7IEpURU5BTlRTRVNTSU9OSURfd2YxZjUyMjE0PTZvMVQ5R3dyb0oxbjR6bUZROFUxVVhqQnFpSzlGdVdhZDFXRmdienZOaUklM0Q7IF9wa19pZC43YTdhYjJmZS0zY2Y5LTRlYWItODkyYS05ZGM4MGNhZDBjYTUuMDA3OT0zMjkxM2FiOWEyM2RmMjY4LjE1MDY0MjAyNjQuMC4xNTA2NDIwMjY0Li47IF9zd2FfcmVmLjdhN2FiMmZlLTNjZjktNGVhYi04OTJhLTlkYzgwY2FkMGNhNS4wMDc5PSU1QiUyMiUyMiUyQyUyMiUyMiUyQzE1MDY0MjAyNjQlMkMlMjJodHRwJTNBJTJGJTJGMTAuMjYuMTU2LjEyNSUzQTUwMDAwJTJGc2FtbDIlMkZpZHAlMkZzc28lMjIlNUQ7IF9zd2FfaWQuN2E3YWIyZmUtM2NmOS00ZWFiLTg5MmEtOWRjODBjYWQwY2E1LjAwNzk9NDVhZjM3ZmY4NDY5N2VhMC4xNTA2NDIwMjY0LjEuMTUwNjQyMDI5MS4xNTA2NDIwMjY0LjsgX3N3YV9zZXMuN2E3YWIyZmUtM2NmOS00ZWFiLTg5MmEtOWRjODBjYWQwY2E1LjAwNzk9Kg0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="BIGipServerdispatcher.int.sap.hana.ondemand.com" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ITFFakREcmViOUJtQUp1Wkk1ZmlGVzBuWUdTZlhMcllyeE9IUU9PTUdnWGluK3dQbmgvSnArak9kRWVtYm13ZEF2bGpGMzhNb0dXN0lBSUk9</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="JSESSIONID" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Q0YyRDk3RjlGRjQ3RTEzRERDNkRCOUVEMDMxQUY1OUNFOEFFRDREQ0RDNUEzM0EwOTYzNzZGMDNFMjY1OUFGNQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="JTENANTSESSIONID_wf1f52214" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Nm8xVDlHd3JvSjFuNHptRlE4VTFVWGpCcWlLOUZ1V2FkMVdGZ2J6dk5pSSUzRA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_pk_id.7a7ab2fe-3cf9-4eab-892a-9dc80cad0ca5.0079" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzI5MTNhYjlhMjNkZjI2OC4xNTA2NDIwMjY0LjAuMTUwNjQyMDI2NC4u</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_swa_ref.7a7ab2fe-3cf9-4eab-892a-9dc80cad0ca5.0079" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>JTVCJTIyJTIyJTJDJTIyJTIyJTJDMTUwNjQyMDI2NCUyQyUyMmh0dHAlM0ElMkYlMkYxMC4yNi4xNTYuMTI1JTNBNTAwMDAlMkZzYW1sMiUyRmlkcCUyRnNzbyUyMiU1RA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_swa_id.7a7ab2fe-3cf9-4eab-892a-9dc80cad0ca5.0079" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDVhZjM3ZmY4NDY5N2VhMC4xNTA2NDIwMjY0LjEuMTUwNjQyMDI5MS4xNTA2NDIwMjY0Lg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_swa_ses.7a7ab2fe-3cf9-4eab-892a-9dc80cad0ca5.0079" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Cache-Control" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NWNmZGRiYTZjNGM5M2E5NTc0ZGE4Nzk1YjIzMWRiOTc5NWVjMTVlMQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Transfer-Encoding" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2h1bmtlZA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAyNiBTZXAgMjAxNyAxMDowNTozOCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U0FQ</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDYWNoZS1Db250cm9sOiBwdWJsaWMsIG1heC1hZ2U9MzE1MzYwMDANCkVUYWc6IDVjZmRkYmE2YzRjOTNhOTU3NGRhODc5NWIyMzFkYjk3OTVlYzE1ZTENCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWQNCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KRGF0ZTogVHVlLCAyNiBTZXAgMjAxNyAxMDowNTozOCBHTVQNClNlcnZlcjogU0FQDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWluczsgcHJlbG9hZA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>YWNlLmRlZmluZSgiYWNlL21vZGUveG1sX2hpZ2hsaWdodF9ydWxlcyIsWyJyZXF1aXJlIiwiZXhwb3J0cyIsIm1vZHVsZSIsImFjZS9saWIvb29wIiwiYWNlL21vZGUvdGV4dF9oaWdobGlnaHRfcnVsZXMiXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7CiJ1c2Ugc3RyaWN0IjsKCnZhciBvb3AgPSByZXF1aXJlKCIuLi9saWIvb29wIik7CnZhciBUZXh0SGlnaGxpZ2h0UnVsZXMgPSByZXF1aXJlKCIuL3RleHRfaGlnaGxpZ2h0X3J1bGVzIikuVGV4dEhpZ2hsaWdodFJ1bGVzOwoKdmFyIFhtbEhpZ2hsaWdodFJ1bGVzID0gZnVuY3Rpb24obm9ybWFsaXplKSB7CiAgICB2YXIgdGFnUmVnZXggPSAiW186YS16QS1aXHhjMC1cdWZmZmZdWy1fOi5hLXpBLVowLTlceGMwLVx1ZmZmZl0qIjsKCiAgICB0aGlzLiRydWxlcyA9IHsKICAgICAgICBzdGFydCA6IFsKICAgICAgICAgICAge3Rva2VuIDogInN0cmluZy5jZGF0YS54bWwiLCByZWdleCA6ICI8XFwhXFxbQ0RBVEFcXFsiLCBuZXh0IDogImNkYXRhIn0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRva2VuIDogWyJwdW5jdHVhdGlvbi54bWwtZGVjbC54bWwiLCAia2V5d29yZC54bWwtZGVjbC54bWwiXSwKICAgICAgICAgICAgICAgIHJlZ2V4IDogIig8XFw/KSh4bWwpKD89W1xcc10pIiwgbmV4dCA6ICJ4bWxfZGVjbCIsIGNhc2VJbnNlbnNpdGl2ZTogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0b2tlbiA6IFsicHVuY3R1YXRpb24uaW5zdHJ1Y3Rpb24ueG1sIiwgImtleXdvcmQuaW5zdHJ1Y3Rpb24ueG1sIl0sCiAgICAgICAgICAgICAgICByZWdleCA6ICIoPFxcPykoIiArIHRhZ1JlZ2V4ICsgIikiLCBuZXh0IDogInByb2Nlc3NpbmdfaW5zdHJ1Y3Rpb24iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHt0b2tlbiA6ICJjb21tZW50LnhtbCIsIHJlZ2V4IDogIjxcXCEtLSIsIG5leHQgOiAiY29tbWVudCJ9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0b2tlbiA6IFsieG1sLXBlLmRvY3R5cGUueG1sIiwgInhtbC1wZS5kb2N0eXBlLnhtbCJdLAogICAgICAgICAgICAgICAgcmVnZXggOiAiKDxcXCEpKERPQ1RZUEUpKD89W1xcc10pIiwgbmV4dCA6ICJkb2N0eXBlIiwgY2FzZUluc2Vuc2l0aXZlOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtpbmNsdWRlIDogInRhZyJ9LAogICAgICAgICAgICB7dG9rZW4gOiAidGV4dC5lbmQtdGFnLW9wZW4ueG1sIiwgcmVnZXg6ICI8LyJ9LAogICAgICAgICAgICB7dG9rZW4gOiAidGV4dC50YWctb3Blbi54bWwiLCByZWdleDogIjwifSwKICAgICAgICAgICAge2luY2x1ZGUgOiAicmVmZXJlbmNlIn0sCiAgICAgICAgICAgIHtkZWZhdWx0VG9rZW4gOiAidGV4dC54bWwifQogICAgICAgIF0sCgogICAgICAgIHhtbF9kZWNsIDogW3sKICAgICAgICAgICAgdG9rZW4gOiAiZW50aXR5Lm90aGVyLmF0dHJpYnV0ZS1uYW1lLmRlY2wtYXR0cmlidXRlLW5hbWUueG1sIiwKICAgICAgICAgICAgcmVnZXggOiAiKD86IiArIHRhZ1JlZ2V4ICsgIjopPyIgKyB0YWdSZWdleCArICIiCiAgICAgICAgfSwgewogICAgICAgICAgICB0b2tlbiA6ICJrZXl3b3JkLm9wZXJhdG9yLmRlY2wtYXR0cmlidXRlLWVxdWFscy54bWwiLAogICAgICAgICAgICByZWdleCA6ICI9IgogICAgICAgIH0sIHsKICAgICAgICAgICAgaW5jbHVkZTogIndoaXRlc3BhY2UiCiAgICAgICAgfSwgewogICAgICAgICAgICBpbmNsdWRlOiAic3RyaW5nIgogICAgICAgIH0sIHsKICAgICAgICAgICAgdG9rZW4gOiAicHVuY3R1YXRpb24ueG1sLWRlY2wueG1sIiwKICAgICAgICAgICAgcmVnZXggOiAiXFw/PiIsCiAgICAgICAgICAgIG5leHQgOiAic3RhcnQiCiAgICAgICAgfV0sCgogICAgICAgIHByb2Nlc3NpbmdfaW5zdHJ1Y3Rpb24gOiBbCiAgICAgICAgICAgIHt0b2tlbiA6ICJwdW5jdHVhdGlvbi5pbnN0cnVjdGlvbi54bWwiLCByZWdleCA6ICJcXD8+IiwgbmV4dCA6ICJzdGFydCJ9LAogICAgICAgICAgICB7ZGVmYXVsdFRva2VuIDogImluc3RydWN0aW9uLnhtbCJ9CiAgICAgICAgXSwKCiAgICAgICAgZG9jdHlwZSA6IFsKICAgICAgICAgICAge2luY2x1ZGUgOiAid2hpdGVzcGFjZSJ9LAogICAgICAgICAgICB7aW5jbHVkZSA6ICJzdHJpbmcifSwKICAgICAgICAgICAge3Rva2VuIDogInhtbC1wZS5kb2N0eXBlLnhtbCIsIHJlZ2V4IDogIj4iLCBuZXh0IDogInN0YXJ0In0sCiAgICAgICAgICAgIHt0b2tlbiA6ICJ4bWwtcGUueG1sIiwgcmVnZXggOiAiWy1fYS16QS1aMC05Ol0rIn0sCiAgICAgICAgICAgIHt0b2tlbiA6ICJwdW5jdHVhdGlvbi5pbnQtc3Vic2V0IiwgcmVnZXggOiAiXFxbIiwgcHVzaCA6ICJpbnRfc3Vic2V0In0KICAgICAgICBdLAoKICAgICAgICBpbnRfc3Vic2V0IDogW3sKICAgICAgICAgICAgdG9rZW4gOiAidGV4dC54bWwiLAogICAgICAgICAgICByZWdleCA6ICJcXHMrIgogICAgICAgIH0sIHsKICAgICAgICAgICAgdG9rZW46ICJwdW5jdHVhdGlvbi5pbnQtc3Vic2V0LnhtbCIsCiAgICAgICAgICAgIHJlZ2V4OiAiXSIsCiAgICAgICAgICAgIG5leHQ6ICJwb3AiCiAgICAgICAgfSwgewogICAgICAgICAgICB0b2tlbiA6IFsicHVuY3R1YXRpb24ubWFya3VwLWRlY2wueG1sIiwgImtleXdvcmQubWFya3VwLWRlY2wueG1sIl0sCiAgICAgICAgICAgIHJlZ2V4IDogIig8XFwhKSgiICsgdGFnUmVnZXggKyAiKSIsCiAgICAgICAgICAgIHB1c2ggOiBbewogICAgICAgICAgICAgICAgdG9rZW4gOiAidGV4dCIsCiAgICAgICAgICAgICAgICByZWdleCA6ICJcXHMrIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJwdW5jdHVhdGlvbi5tYXJrdXAtZGVjbC54bWwiLAogICAgICAgICAgICAgICAgcmVnZXggOiAiPiIsCiAgICAgICAgICAgICAgICBuZXh0IDogInBvcCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAge2luY2x1ZGUgOiAic3RyaW5nIn1dCiAgICAgICAgfV0sCgogICAgICAgIGNkYXRhIDogWwogICAgICAgICAgICB7dG9rZW4gOiAic3RyaW5nLmNkYXRhLnhtbCIsIHJlZ2V4IDogIlxcXVxcXT4iLCBuZXh0IDogInN0YXJ0In0sCiAgICAgICAgICAgIHt0b2tlbiA6ICJ0ZXh0LnhtbCIsIHJlZ2V4IDogIlxccysifSwKICAgICAgICAgICAge3Rva2VuIDogInRleHQueG1sIiwgcmVnZXggOiAiKD86W15cXF1dfFxcXSg/IVxcXT4pKSsifQogICAgICAgIF0sCgogICAgICAgIGNvbW1lbnQgOiBbCiAgICAgICAgICAgIHt0b2tlbiA6ICJjb21tZW50LnhtbCIsIHJlZ2V4IDogIi0tPiIsIG5leHQgOiAic3RhcnQifSwKICAgICAgICAgICAge2RlZmF1bHRUb2tlbiA6ICJjb21tZW50LnhtbCJ9CiAgICAgICAgXSwKCiAgICAgICAgcmVmZXJlbmNlIDogW3sKICAgICAgICAgICAgdG9rZW4gOiAiY29uc3RhbnQubGFuZ3VhZ2UuZXNjYXBlLnJlZmVyZW5jZS54bWwiLAogICAgICAgICAgICByZWdleCA6ICIoPzomI1swLTldKzspfCg/OiYjeFswLTlhLWZBLUZdKzspfCg/OiZbYS16QS1aMC05XzpcXC4tXSs7KSIKICAgICAgICB9XSwKCiAgICAgICAgYXR0cl9yZWZlcmVuY2UgOiBbewogICAgICAgICAgICB0b2tlbiA6ICJjb25zdGFudC5sYW5ndWFnZS5lc2NhcGUucmVmZXJlbmNlLmF0dHJpYnV0ZS12YWx1ZS54bWwiLAogICAgICAgICAgICByZWdleCA6ICIoPzomI1swLTldKzspfCg/OiYjeFswLTlhLWZBLUZdKzspfCg/OiZbYS16QS1aMC05XzpcXC4tXSs7KSIKICAgICAgICB9XSwKCiAgICAgICAgdGFnIDogW3sKICAgICAgICAgICAgdG9rZW4gOiBbIm1ldGEudGFnLnB1bmN0dWF0aW9uLnRhZy1vcGVuLnhtbCIsICJtZXRhLnRhZy5wdW5jdHVhdGlvbi5lbmQtdGFnLW9wZW4ueG1sIiwgIm1ldGEudGFnLnRhZy1uYW1lLnhtbCJdLAogICAgICAgICAgICByZWdleCA6ICIoPzooPCl8KDwvKSkoKD86IiArIHRhZ1JlZ2V4ICsgIjopPyIgKyB0YWdSZWdleCArICIpIiwKICAgICAgICAgICAgbmV4dDogWwogICAgICAgICAgICAgICAge2luY2x1ZGUgOiAiYXR0cmlidXRlcyJ9LAogICAgICAgICAgICAgICAge3Rva2VuIDogIm1ldGEudGFnLnB1bmN0dWF0aW9uLnRhZy1jbG9zZS54bWwiLCByZWdleCA6ICIvPz4iLCBuZXh0IDogInN0YXJ0In0KICAgICAgICAgICAgXQogICAgICAgIH1dLAoKICAgICAgICB0YWdfd2hpdGVzcGFjZSA6IFsKICAgICAgICAgICAge3Rva2VuIDogInRleHQudGFnLXdoaXRlc3BhY2UueG1sIiwgcmVnZXggOiAiXFxzKyJ9CiAgICAgICAgXSwKICAgICAgICB3aGl0ZXNwYWNlIDogWwogICAgICAgICAgICB7dG9rZW4gOiAidGV4dC53aGl0ZXNwYWNlLnhtbCIsIHJlZ2V4IDogIlxccysifQogICAgICAgIF0sCiAgICAgICAgc3RyaW5nOiBbewogICAgICAgICAgICB0b2tlbiA6ICJzdHJpbmcueG1sIiwKICAgICAgICAgICAgcmVnZXggOiAiJyIsCiAgICAgICAgICAgIHB1c2ggOiBbCiAgICAgICAgICAgICAgICB7dG9rZW4gOiAic3RyaW5nLnhtbCIsIHJlZ2V4OiAiJyIsIG5leHQ6ICJwb3AifSwKICAgICAgICAgICAgICAgIHtkZWZhdWx0VG9rZW4gOiAic3RyaW5nLnhtbCJ9CiAgICAgICAgICAgIF0KICAgICAgICB9LCB7CiAgICAgICAgICAgIHRva2VuIDogInN0cmluZy54bWwiLAogICAgICAgICAgICByZWdleCA6ICciJywKICAgICAgICAgICAgcHVzaCA6IFsKICAgICAgICAgICAgICAgIHt0b2tlbiA6ICJzdHJpbmcueG1sIiwgcmVnZXg6ICciJywgbmV4dDogInBvcCJ9LAogICAgICAgICAgICAgICAge2RlZmF1bHRUb2tlbiA6ICJzdHJpbmcueG1sIn0KICAgICAgICAgICAgXQogICAgICAgIH1dLAoKICAgICAgICBhdHRyaWJ1dGVzOiBbewogICAgICAgICAgICB0b2tlbiA6ICJlbnRpdHkub3RoZXIuYXR0cmlidXRlLW5hbWUueG1sIiwKICAgICAgICAgICAgcmVnZXggOiAiKD86IiArIHRhZ1JlZ2V4ICsgIjopPyIgKyB0YWdSZWdleCArICIiCiAgICAgICAgfSwgewogICAgICAgICAgICB0b2tlbiA6ICJrZXl3b3JkLm9wZXJhdG9yLmF0dHJpYnV0ZS1lcXVhbHMueG1sIiwKICAgICAgICAgICAgcmVnZXggOiAiPSIKICAgICAgICB9LCB7CiAgICAgICAgICAgIGluY2x1ZGU6ICJ0YWdfd2hpdGVzcGFjZSIKICAgICAgICB9LCB7CiAgICAgICAgICAgIGluY2x1ZGU6ICJhdHRyaWJ1dGVfdmFsdWUiCiAgICAgICAgfV0sCgogICAgICAgIGF0dHJpYnV0ZV92YWx1ZTogW3sKICAgICAgICAgICAgdG9rZW4gOiAic3RyaW5nLmF0dHJpYnV0ZS12YWx1ZS54bWwiLAogICAgICAgICAgICByZWdleCA6ICInIiwKICAgICAgICAgICAgcHVzaCA6IFsKICAgICAgICAgICAgICAgIHt0b2tlbiA6ICJzdHJpbmcuYXR0cmlidXRlLXZhbHVlLnhtbCIsIHJlZ2V4OiAiJyIsIG5leHQ6ICJwb3AifSwKICAgICAgICAgICAgICAgIHtpbmNsdWRlIDogImF0dHJfcmVmZXJlbmNlIn0sCiAgICAgICAgICAgICAgICB7ZGVmYXVsdFRva2VuIDogInN0cmluZy5hdHRyaWJ1dGUtdmFsdWUueG1sIn0KICAgICAgICAgICAgXQogICAgICAgIH0sIHsKICAgICAgICAgICAgdG9rZW4gOiAic3RyaW5nLmF0dHJpYnV0ZS12YWx1ZS54bWwiLAogICAgICAgICAgICByZWdleCA6ICciJywKICAgICAgICAgICAgcHVzaCA6IFsKICAgICAgICAgICAgICAgIHt0b2tlbiA6ICJzdHJpbmcuYXR0cmlidXRlLXZhbHVlLnhtbCIsIHJlZ2V4OiAnIicsIG5leHQ6ICJwb3AifSwKICAgICAgICAgICAgICAgIHtpbmNsdWRlIDogImF0dHJfcmVmZXJlbmNlIn0sCiAgICAgICAgICAgICAgICB7ZGVmYXVsdFRva2VuIDogInN0cmluZy5hdHRyaWJ1dGUtdmFsdWUueG1sIn0KICAgICAgICAgICAgXQogICAgICAgIH1dCiAgICB9OwoKICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBYbWxIaWdobGlnaHRSdWxlcykKICAgICAgICB0aGlzLm5vcm1hbGl6ZVJ1bGVzKCk7Cn07CgoKKGZ1bmN0aW9uKCkgewoKICAgIHRoaXMuZW1iZWRUYWdSdWxlcyA9IGZ1bmN0aW9uKEhpZ2hsaWdodFJ1bGVzLCBwcmVmaXgsIHRhZyl7CiAgICAgICAgdGhpcy4kcnVsZXMudGFnLnVuc2hpZnQoewogICAgICAgICAgICB0b2tlbiA6IFsibWV0YS50YWcucHVuY3R1YXRpb24udGFnLW9wZW4ueG1sIiwgIm1ldGEudGFnLiIgKyB0YWcgKyAiLnRhZy1uYW1lLnhtbCJdLAogICAgICAgICAgICByZWdleCA6ICIoPCkoIiArIHRhZyArICIoPz1cXHN8PnwkKSkiLAogICAgICAgICAgICBuZXh0OiBbCiAgICAgICAgICAgICAgICB7aW5jbHVkZSA6ICJhdHRyaWJ1dGVzIn0sCiAgICAgICAgICAgICAgICB7dG9rZW4gOiAibWV0YS50YWcucHVuY3R1YXRpb24udGFnLWNsb3NlLnhtbCIsIHJlZ2V4IDogIi8/PiIsIG5leHQgOiBwcmVmaXggKyAic3RhcnQifQogICAgICAgICAgICBdCiAgICAgICAgfSk7CgogICAgICAgIHRoaXMuJHJ1bGVzW3RhZyArICItZW5kIl0gPSBbCiAgICAgICAgICAgIHtpbmNsdWRlIDogImF0dHJpYnV0ZXMifSwKICAgICAgICAgICAge3Rva2VuIDogIm1ldGEudGFnLnB1bmN0dWF0aW9uLnRhZy1jbG9zZS54bWwiLCByZWdleCA6ICIvPz4iLCAgbmV4dDogInN0YXJ0IiwKICAgICAgICAgICAgICAgIG9uTWF0Y2ggOiBmdW5jdGlvbih2YWx1ZSwgY3VycmVudFN0YXRlLCBzdGFjaykgewogICAgICAgICAgICAgICAgICAgIHN0YWNrLnNwbGljZSgwKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b2tlbjsKICAgICAgICAgICAgfX0KICAgICAgICBdCgogICAgICAgIHRoaXMuZW1iZWRSdWxlcyhIaWdobGlnaHRSdWxlcywgcHJlZml4LCBbewogICAgICAgICAgICB0b2tlbjogWyJtZXRhLnRhZy5wdW5jdHVhdGlvbi5lbmQtdGFnLW9wZW4ueG1sIiwgIm1ldGEudGFnLiIgKyB0YWcgKyAiLnRhZy1uYW1lLnhtbCJdLAogICAgICAgICAgICByZWdleCA6ICIoPC8pKCIgKyB0YWcgKyAiKD89XFxzfD58JCkpIiwKICAgICAgICAgICAgbmV4dDogdGFnICsgIi1lbmQiCiAgICAgICAgfSwgewogICAgICAgICAgICB0b2tlbjogInN0cmluZy5jZGF0YS54bWwiLAogICAgICAgICAgICByZWdleCA6ICI8XFwhXFxbQ0RBVEFcXFsiCiAgICAgICAgfSwgewogICAgICAgICAgICB0b2tlbjogInN0cmluZy5jZGF0YS54bWwiLAogICAgICAgICAgICByZWdleCA6ICJcXF1cXF0+IgogICAgICAgIH1dKTsKICAgIH07Cgp9KS5jYWxsKFRleHRIaWdobGlnaHRSdWxlcy5wcm90b3R5cGUpOwoKb29wLmluaGVyaXRzKFhtbEhpZ2hsaWdodFJ1bGVzLCBUZXh0SGlnaGxpZ2h0UnVsZXMpOwoKZXhwb3J0cy5YbWxIaWdobGlnaHRSdWxlcyA9IFhtbEhpZ2hsaWdodFJ1bGVzOwp9KTsKCmFjZS5kZWZpbmUoImFjZS9tb2RlL2JlaGF2aW91ci94bWwiLFsicmVxdWlyZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJhY2UvbGliL29vcCIsImFjZS9tb2RlL2JlaGF2aW91ciIsImFjZS90b2tlbl9pdGVyYXRvciIsImFjZS9saWIvbGFuZyJdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKInVzZSBzdHJpY3QiOwoKdmFyIG9vcCA9IHJlcXVpcmUoIi4uLy4uL2xpYi9vb3AiKTsKdmFyIEJlaGF2aW91ciA9IHJlcXVpcmUoIi4uL2JlaGF2aW91ciIpLkJlaGF2aW91cjsKdmFyIFRva2VuSXRlcmF0b3IgPSByZXF1aXJlKCIuLi8uLi90b2tlbl9pdGVyYXRvciIpLlRva2VuSXRlcmF0b3I7CnZhciBsYW5nID0gcmVxdWlyZSgiLi4vLi4vbGliL2xhbmciKTsKCmZ1bmN0aW9uIGlzKHRva2VuLCB0eXBlKSB7CiAgICByZXR1cm4gdG9rZW4udHlwZS5sYXN0SW5kZXhPZih0eXBlICsgIi54bWwiKSA+IC0xOwp9Cgp2YXIgWG1sQmVoYXZpb3VyID0gZnVuY3Rpb24gKCkgewoKICAgIHRoaXMuYWRkKCJzdHJpbmdfZHF1b3RlcyIsICJpbnNlcnRpb24iLCBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbiwgZWRpdG9yLCBzZXNzaW9uLCB0ZXh0KSB7CiAgICAgICAgaWYgKHRleHQgPT0gJyInIHx8IHRleHQgPT0gIiciKSB7CiAgICAgICAgICAgIHZhciBxdW90ZSA9IHRleHQ7CiAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IHNlc3Npb24uZG9jLmdldFRleHRSYW5nZShlZGl0b3IuZ2V0U2VsZWN0aW9uUmFuZ2UoKSk7CiAgICAgICAgICAgIGlmIChzZWxlY3RlZCAhPT0gIiIgJiYgc2VsZWN0ZWQgIT09ICInIiAmJiBzZWxlY3RlZCAhPSAnIicgJiYgZWRpdG9yLmdldFdyYXBCZWhhdmlvdXJzRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHRleHQ6IHF1b3RlICsgc2VsZWN0ZWQgKyBxdW90ZSwKICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb246IGZhbHNlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvclBvc2l0aW9uKCk7CiAgICAgICAgICAgIHZhciBsaW5lID0gc2Vzc2lvbi5kb2MuZ2V0TGluZShjdXJzb3Iucm93KTsKICAgICAgICAgICAgdmFyIHJpZ2h0Q2hhciA9IGxpbmUuc3Vic3RyaW5nKGN1cnNvci5jb2x1bW4sIGN1cnNvci5jb2x1bW4gKyAxKTsKICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gbmV3IFRva2VuSXRlcmF0b3Ioc2Vzc2lvbiwgY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbik7CiAgICAgICAgICAgIHZhciB0b2tlbiA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbigpOwoKICAgICAgICAgICAgaWYgKHJpZ2h0Q2hhciA9PSBxdW90ZSAmJiAoaXModG9rZW4sICJhdHRyaWJ1dGUtdmFsdWUiKSB8fCBpcyh0b2tlbiwgInN0cmluZyIpKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiIiwKICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb246IFsxLCAxXQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCF0b2tlbikKICAgICAgICAgICAgICAgIHRva2VuID0gaXRlcmF0b3Iuc3RlcEJhY2t3YXJkKCk7CgogICAgICAgICAgICBpZiAoIXRva2VuKQogICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgd2hpbGUgKGlzKHRva2VuLCAidGFnLXdoaXRlc3BhY2UiKSB8fCBpcyh0b2tlbiwgIndoaXRlc3BhY2UiKSkgewogICAgICAgICAgICAgICAgdG9rZW4gPSBpdGVyYXRvci5zdGVwQmFja3dhcmQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgcmlnaHRTcGFjZSA9ICFyaWdodENoYXIgfHwgcmlnaHRDaGFyLm1hdGNoKC9ccy8pOwogICAgICAgICAgICBpZiAoaXModG9rZW4sICJhdHRyaWJ1dGUtZXF1YWxzIikgJiYgKHJpZ2h0U3BhY2UgfHwgcmlnaHRDaGFyID09ICc+JykgfHwgKGlzKHRva2VuLCAiZGVjbC1hdHRyaWJ1dGUtZXF1YWxzIikgJiYgKHJpZ2h0U3BhY2UgfHwgcmlnaHRDaGFyID09ICc/JykpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHRleHQ6IHF1b3RlICsgcXVvdGUsCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBbMSwgMV0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKCiAgICB0aGlzLmFkZCgic3RyaW5nX2RxdW90ZXMiLCAiZGVsZXRpb24iLCBmdW5jdGlvbihzdGF0ZSwgYWN0aW9uLCBlZGl0b3IsIHNlc3Npb24sIHJhbmdlKSB7CiAgICAgICAgdmFyIHNlbGVjdGVkID0gc2Vzc2lvbi5kb2MuZ2V0VGV4dFJhbmdlKHJhbmdlKTsKICAgICAgICBpZiAoIXJhbmdlLmlzTXVsdGlMaW5lKCkgJiYgKHNlbGVjdGVkID09ICciJyB8fCBzZWxlY3RlZCA9PSAiJyIpKSB7CiAgICAgICAgICAgIHZhciBsaW5lID0gc2Vzc2lvbi5kb2MuZ2V0TGluZShyYW5nZS5zdGFydC5yb3cpOwogICAgICAgICAgICB2YXIgcmlnaHRDaGFyID0gbGluZS5zdWJzdHJpbmcocmFuZ2Uuc3RhcnQuY29sdW1uICsgMSwgcmFuZ2Uuc3RhcnQuY29sdW1uICsgMik7CiAgICAgICAgICAgIGlmIChyaWdodENoYXIgPT0gc2VsZWN0ZWQpIHsKICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4rKzsKICAgICAgICAgICAgICAgIHJldHVybiByYW5nZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIHRoaXMuYWRkKCJhdXRvY2xvc2luZyIsICJpbnNlcnRpb24iLCBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbiwgZWRpdG9yLCBzZXNzaW9uLCB0ZXh0KSB7CiAgICAgICAgaWYgKHRleHQgPT0gJz4nKSB7CiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3JQb3NpdGlvbigpOwogICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBuZXcgVG9rZW5JdGVyYXRvcihzZXNzaW9uLCBwb3NpdGlvbi5yb3csIHBvc2l0aW9uLmNvbHVtbik7CiAgICAgICAgICAgIHZhciB0b2tlbiA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbigpIHx8IGl0ZXJhdG9yLnN0ZXBCYWNrd2FyZCgpOwogICAgICAgICAgICBpZiAoIXRva2VuIHx8ICEoaXModG9rZW4sICJ0YWctbmFtZSIpIHx8IGlzKHRva2VuLCAidGFnLXdoaXRlc3BhY2UiKSB8fCBpcyh0b2tlbiwgImF0dHJpYnV0ZS1uYW1lIikgfHwgaXModG9rZW4sICJhdHRyaWJ1dGUtZXF1YWxzIikgfHwgaXModG9rZW4sICJhdHRyaWJ1dGUtdmFsdWUiKSkpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGlmIChpcyh0b2tlbiwgInJlZmVyZW5jZS5hdHRyaWJ1dGUtdmFsdWUiKSkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgaWYgKGlzKHRva2VuLCAiYXR0cmlidXRlLXZhbHVlIikpIHsKICAgICAgICAgICAgICAgIHZhciBmaXJzdENoYXIgPSB0b2tlbi52YWx1ZS5jaGFyQXQoMCk7CiAgICAgICAgICAgICAgICBpZiAoZmlyc3RDaGFyID09ICciJyB8fCBmaXJzdENoYXIgPT0gIiciKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RDaGFyID0gdG9rZW4udmFsdWUuY2hhckF0KHRva2VuLnZhbHVlLmxlbmd0aCAtIDEpOwogICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbkVuZCA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpICsgdG9rZW4udmFsdWUubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbkVuZCA+IHBvc2l0aW9uLmNvbHVtbiB8fCB0b2tlbkVuZCA9PSBwb3NpdGlvbi5jb2x1bW4gJiYgZmlyc3RDaGFyICE9IGxhc3RDaGFyKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2hpbGUgKCFpcyh0b2tlbiwgInRhZy1uYW1lIikpIHsKICAgICAgICAgICAgICAgIHRva2VuID0gaXRlcmF0b3Iuc3RlcEJhY2t3YXJkKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciB0b2tlblJvdyA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpOwogICAgICAgICAgICB2YXIgdG9rZW5Db2x1bW4gPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKTsKICAgICAgICAgICAgaWYgKGlzKGl0ZXJhdG9yLnN0ZXBCYWNrd2FyZCgpLCAiZW5kLXRhZy1vcGVuIikpCiAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRva2VuLnZhbHVlOwogICAgICAgICAgICBpZiAodG9rZW5Sb3cgPT0gcG9zaXRpb24ucm93KQogICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQuc3Vic3RyaW5nKDAsIHBvc2l0aW9uLmNvbHVtbiAtIHRva2VuQ29sdW1uKTsKCiAgICAgICAgICAgIGlmICh0aGlzLnZvaWRFbGVtZW50cy5oYXNPd25Qcm9wZXJ0eShlbGVtZW50LnRvTG93ZXJDYXNlKCkpKQogICAgICAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgIHRleHQ6ICI+IiArICI8LyIgKyBlbGVtZW50ICsgIj4iLAogICAgICAgICAgICAgICBzZWxlY3Rpb246IFsxLCAxXQogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0pOwoKICAgIHRoaXMuYWRkKCJhdXRvaW5kZW50IiwgImluc2VydGlvbiIsIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uLCBlZGl0b3IsIHNlc3Npb24sIHRleHQpIHsKICAgICAgICBpZiAodGV4dCA9PSAiXG4iKSB7CiAgICAgICAgICAgIHZhciBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yUG9zaXRpb24oKTsKICAgICAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmdldExpbmUoY3Vyc29yLnJvdyk7CiAgICAgICAgICAgIHZhciBpdGVyYXRvciA9IG5ldyBUb2tlbkl0ZXJhdG9yKHNlc3Npb24sIGN1cnNvci5yb3csIGN1cnNvci5jb2x1bW4pOwogICAgICAgICAgICB2YXIgdG9rZW4gPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW4oKTsKCiAgICAgICAgICAgIGlmICh0b2tlbiAmJiB0b2tlbi50eXBlLmluZGV4T2YoInRhZy1jbG9zZSIpICE9PSAtMSkgewogICAgICAgICAgICAgICAgaWYgKHRva2VuLnZhbHVlID09ICIvPiIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgd2hpbGUgKHRva2VuICYmIHRva2VuLnR5cGUuaW5kZXhPZigidGFnLW5hbWUiKSA9PT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IGl0ZXJhdG9yLnN0ZXBCYWNrd2FyZCgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghdG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIHRhZyA9IHRva2VuLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIHJvdyA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpOwogICAgICAgICAgICAgICAgdG9rZW4gPSBpdGVyYXRvci5zdGVwQmFja3dhcmQoKTsKICAgICAgICAgICAgICAgIGlmICghdG9rZW4gfHwgdG9rZW4udHlwZS5pbmRleE9mKCJlbmQtdGFnIikgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh0aGlzLnZvaWRFbGVtZW50cyAmJiAhdGhpcy52b2lkRWxlbWVudHNbdGFnXSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuZXh0VG9rZW4gPSBzZXNzaW9uLmdldFRva2VuQXQoY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbisxKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZ2V0TGluZShyb3cpOwogICAgICAgICAgICAgICAgICAgIHZhciBuZXh0SW5kZW50ID0gdGhpcy4kZ2V0SW5kZW50KGxpbmUpOwogICAgICAgICAgICAgICAgICAgIHZhciBpbmRlbnQgPSBuZXh0SW5kZW50ICsgc2Vzc2lvbi5nZXRUYWJTdHJpbmcoKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRUb2tlbiAmJiBuZXh0VG9rZW4udmFsdWUgPT09ICI8LyIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICJcbiIgKyBpbmRlbnQgKyAiXG4iICsgbmV4dEluZGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogWzEsIGluZGVudC5sZW5ndGgsIDEsIGluZGVudC5sZW5ndGhdCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICJcbiIgKyBpbmRlbnQKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKCn07Cgpvb3AuaW5oZXJpdHMoWG1sQmVoYXZpb3VyLCBCZWhhdmlvdXIpOwoKZXhwb3J0cy5YbWxCZWhhdmlvdXIgPSBYbWxCZWhhdmlvdXI7Cn0pOwoKYWNlLmRlZmluZSgiYWNlL21vZGUvZm9sZGluZy94bWwiLFsicmVxdWlyZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJhY2UvbGliL29vcCIsImFjZS9saWIvbGFuZyIsImFjZS9yYW5nZSIsImFjZS9tb2RlL2ZvbGRpbmcvZm9sZF9tb2RlIiwiYWNlL3Rva2VuX2l0ZXJhdG9yIl0sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewoidXNlIHN0cmljdCI7Cgp2YXIgb29wID0gcmVxdWlyZSgiLi4vLi4vbGliL29vcCIpOwp2YXIgbGFuZyA9IHJlcXVpcmUoIi4uLy4uL2xpYi9sYW5nIik7CnZhciBSYW5nZSA9IHJlcXVpcmUoIi4uLy4uL3JhbmdlIikuUmFuZ2U7CnZhciBCYXNlRm9sZE1vZGUgPSByZXF1aXJlKCIuL2ZvbGRfbW9kZSIpLkZvbGRNb2RlOwp2YXIgVG9rZW5JdGVyYXRvciA9IHJlcXVpcmUoIi4uLy4uL3Rva2VuX2l0ZXJhdG9yIikuVG9rZW5JdGVyYXRvcjsKCnZhciBGb2xkTW9kZSA9IGV4cG9ydHMuRm9sZE1vZGUgPSBmdW5jdGlvbih2b2lkRWxlbWVudHMsIG9wdGlvbmFsRW5kVGFncykgewogICAgQmFzZUZvbGRNb2RlLmNhbGwodGhpcyk7CiAgICB0aGlzLnZvaWRFbGVtZW50cyA9IHZvaWRFbGVtZW50cyB8fCB7fTsKICAgIHRoaXMub3B0aW9uYWxFbmRUYWdzID0gb29wLm1peGluKHt9LCB0aGlzLnZvaWRFbGVtZW50cyk7CiAgICBpZiAob3B0aW9uYWxFbmRUYWdzKQogICAgICAgIG9vcC5taXhpbih0aGlzLm9wdGlvbmFsRW5kVGFncywgb3B0aW9uYWxFbmRUYWdzKTsKICAgIAp9Owpvb3AuaW5oZXJpdHMoRm9sZE1vZGUsIEJhc2VGb2xkTW9kZSk7Cgp2YXIgVGFnID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLnRhZ05hbWUgPSAiIjsKICAgIHRoaXMuY2xvc2luZyA9IGZhbHNlOwogICAgdGhpcy5zZWxmQ2xvc2luZyA9IGZhbHNlOwogICAgdGhpcy5zdGFydCA9IHtyb3c6IDAsIGNvbHVtbjogMH07CiAgICB0aGlzLmVuZCA9IHtyb3c6IDAsIGNvbHVtbjogMH07Cn07CgpmdW5jdGlvbiBpcyh0b2tlbiwgdHlwZSkgewogICAgcmV0dXJuIHRva2VuLnR5cGUubGFzdEluZGV4T2YodHlwZSArICIueG1sIikgPiAtMTsKfQoKKGZ1bmN0aW9uKCkgewoKICAgIHRoaXMuZ2V0Rm9sZFdpZGdldCA9IGZ1bmN0aW9uKHNlc3Npb24sIGZvbGRTdHlsZSwgcm93KSB7CiAgICAgICAgdmFyIHRhZyA9IHRoaXMuX2dldEZpcnN0VGFnSW5MaW5lKHNlc3Npb24sIHJvdyk7CgogICAgICAgIGlmICghdGFnKQogICAgICAgICAgICByZXR1cm4gIiI7CgogICAgICAgIGlmICh0YWcuY2xvc2luZyB8fCAoIXRhZy50YWdOYW1lICYmIHRhZy5zZWxmQ2xvc2luZykpCiAgICAgICAgICAgIHJldHVybiBmb2xkU3R5bGUgPT0gIm1hcmtiZWdpbmVuZCIgPyAiZW5kIiA6ICIiOwoKICAgICAgICBpZiAoIXRhZy50YWdOYW1lIHx8IHRhZy5zZWxmQ2xvc2luZyB8fCB0aGlzLnZvaWRFbGVtZW50cy5oYXNPd25Qcm9wZXJ0eSh0YWcudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSkKICAgICAgICAgICAgcmV0dXJuICIiOwoKICAgICAgICBpZiAodGhpcy5fZmluZEVuZFRhZ0luTGluZShzZXNzaW9uLCByb3csIHRhZy50YWdOYW1lLCB0YWcuZW5kLmNvbHVtbikpCiAgICAgICAgICAgIHJldHVybiAiIjsKCiAgICAgICAgcmV0dXJuICJzdGFydCI7CiAgICB9OwogICAgdGhpcy5fZ2V0Rmlyc3RUYWdJbkxpbmUgPSBmdW5jdGlvbihzZXNzaW9uLCByb3cpIHsKICAgICAgICB2YXIgdG9rZW5zID0gc2Vzc2lvbi5nZXRUb2tlbnMocm93KTsKICAgICAgICB2YXIgdGFnID0gbmV3IFRhZygpOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV07CiAgICAgICAgICAgIGlmIChpcyh0b2tlbiwgInRhZy1vcGVuIikpIHsKICAgICAgICAgICAgICAgIHRhZy5lbmQuY29sdW1uID0gdGFnLnN0YXJ0LmNvbHVtbiArIHRva2VuLnZhbHVlLmxlbmd0aDsKICAgICAgICAgICAgICAgIHRhZy5jbG9zaW5nID0gaXModG9rZW4sICJlbmQtdGFnLW9wZW4iKTsKICAgICAgICAgICAgICAgIHRva2VuID0gdG9rZW5zWysraV07CiAgICAgICAgICAgICAgICBpZiAoIXRva2VuKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgdGFnLnRhZ05hbWUgPSB0b2tlbi52YWx1ZTsKICAgICAgICAgICAgICAgIHRhZy5lbmQuY29sdW1uICs9IHRva2VuLnZhbHVlLmxlbmd0aDsKICAgICAgICAgICAgICAgIGZvciAoaSsrOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSB0b2tlbnNbaV07CiAgICAgICAgICAgICAgICAgICAgdGFnLmVuZC5jb2x1bW4gKz0gdG9rZW4udmFsdWUubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIGlmIChpcyh0b2tlbiwgInRhZy1jbG9zZSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhZy5zZWxmQ2xvc2luZyA9IHRva2VuLnZhbHVlID09ICcvPic7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0YWc7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXModG9rZW4sICJ0YWctY2xvc2UiKSkgewogICAgICAgICAgICAgICAgdGFnLnNlbGZDbG9zaW5nID0gdG9rZW4udmFsdWUgPT0gJy8+JzsKICAgICAgICAgICAgICAgIHJldHVybiB0YWc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGFnLnN0YXJ0LmNvbHVtbiArPSB0b2tlbi52YWx1ZS5sZW5ndGg7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH07CgogICAgdGhpcy5fZmluZEVuZFRhZ0luTGluZSA9IGZ1bmN0aW9uKHNlc3Npb24sIHJvdywgdGFnTmFtZSwgc3RhcnRDb2x1bW4pIHsKICAgICAgICB2YXIgdG9rZW5zID0gc2Vzc2lvbi5nZXRUb2tlbnMocm93KTsKICAgICAgICB2YXIgY29sdW1uID0gMDsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV07CiAgICAgICAgICAgIGNvbHVtbiArPSB0b2tlbi52YWx1ZS5sZW5ndGg7CiAgICAgICAgICAgIGlmIChjb2x1bW4gPCBzdGFydENvbHVtbikKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBpZiAoaXModG9rZW4sICJlbmQtdGFnLW9wZW4iKSkgewogICAgICAgICAgICAgICAgdG9rZW4gPSB0b2tlbnNbaSArIDFdOwogICAgICAgICAgICAgICAgaWYgKHRva2VuICYmIHRva2VuLnZhbHVlID09IHRhZ05hbWUpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICAgIHRoaXMuX3JlYWRUYWdGb3J3YXJkID0gZnVuY3Rpb24oaXRlcmF0b3IpIHsKICAgICAgICB2YXIgdG9rZW4gPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW4oKTsKICAgICAgICBpZiAoIXRva2VuKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgdmFyIHRhZyA9IG5ldyBUYWcoKTsKICAgICAgICBkbyB7CiAgICAgICAgICAgIGlmIChpcyh0b2tlbiwgInRhZy1vcGVuIikpIHsKICAgICAgICAgICAgICAgIHRhZy5jbG9zaW5nID0gaXModG9rZW4sICJlbmQtdGFnLW9wZW4iKTsKICAgICAgICAgICAgICAgIHRhZy5zdGFydC5yb3cgPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKTsKICAgICAgICAgICAgICAgIHRhZy5zdGFydC5jb2x1bW4gPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChpcyh0b2tlbiwgInRhZy1uYW1lIikpIHsKICAgICAgICAgICAgICAgIHRhZy50YWdOYW1lID0gdG9rZW4udmFsdWU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXModG9rZW4sICJ0YWctY2xvc2UiKSkgewogICAgICAgICAgICAgICAgdGFnLnNlbGZDbG9zaW5nID0gdG9rZW4udmFsdWUgPT0gIi8+IjsKICAgICAgICAgICAgICAgIHRhZy5lbmQucm93ID0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCk7CiAgICAgICAgICAgICAgICB0YWcuZW5kLmNvbHVtbiA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpICsgdG9rZW4udmFsdWUubGVuZ3RoOwogICAgICAgICAgICAgICAgaXRlcmF0b3Iuc3RlcEZvcndhcmQoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0YWc7CiAgICAgICAgICAgIH0KICAgICAgICB9IHdoaWxlKHRva2VuID0gaXRlcmF0b3Iuc3RlcEZvcndhcmQoKSk7CgogICAgICAgIHJldHVybiBudWxsOwogICAgfTsKICAgIAogICAgdGhpcy5fcmVhZFRhZ0JhY2t3YXJkID0gZnVuY3Rpb24oaXRlcmF0b3IpIHsKICAgICAgICB2YXIgdG9rZW4gPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW4oKTsKICAgICAgICBpZiAoIXRva2VuKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgdmFyIHRhZyA9IG5ldyBUYWcoKTsKICAgICAgICBkbyB7CiAgICAgICAgICAgIGlmIChpcyh0b2tlbiwgInRhZy1vcGVuIikpIHsKICAgICAgICAgICAgICAgIHRhZy5jbG9zaW5nID0gaXModG9rZW4sICJlbmQtdGFnLW9wZW4iKTsKICAgICAgICAgICAgICAgIHRhZy5zdGFydC5yb3cgPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKTsKICAgICAgICAgICAgICAgIHRhZy5zdGFydC5jb2x1bW4gPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKTsKICAgICAgICAgICAgICAgIGl0ZXJhdG9yLnN0ZXBCYWNrd2FyZCgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRhZzsKICAgICAgICAgICAgfSBlbHNlIGlmIChpcyh0b2tlbiwgInRhZy1uYW1lIikpIHsKICAgICAgICAgICAgICAgIHRhZy50YWdOYW1lID0gdG9rZW4udmFsdWU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXModG9rZW4sICJ0YWctY2xvc2UiKSkgewogICAgICAgICAgICAgICAgdGFnLnNlbGZDbG9zaW5nID0gdG9rZW4udmFsdWUgPT0gIi8+IjsKICAgICAgICAgICAgICAgIHRhZy5lbmQucm93ID0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCk7CiAgICAgICAgICAgICAgICB0YWcuZW5kLmNvbHVtbiA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpICsgdG9rZW4udmFsdWUubGVuZ3RoOwogICAgICAgICAgICB9CiAgICAgICAgfSB3aGlsZSh0b2tlbiA9IGl0ZXJhdG9yLnN0ZXBCYWNrd2FyZCgpKTsKCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9OwogICAgCiAgICB0aGlzLl9wb3AgPSBmdW5jdGlvbihzdGFjaywgdGFnKSB7CiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkgewogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRvcCA9IHN0YWNrW3N0YWNrLmxlbmd0aC0xXTsKICAgICAgICAgICAgaWYgKCF0YWcgfHwgdG9wLnRhZ05hbWUgPT0gdGFnLnRhZ05hbWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzdGFjay5wb3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbmFsRW5kVGFncy5oYXNPd25Qcm9wZXJ0eSh0b3AudGFnTmFtZSkpIHsKICAgICAgICAgICAgICAgIHN0YWNrLnBvcCgpOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICAKICAgIHRoaXMuZ2V0Rm9sZFdpZGdldFJhbmdlID0gZnVuY3Rpb24oc2Vzc2lvbiwgZm9sZFN0eWxlLCByb3cpIHsKICAgICAgICB2YXIgZmlyc3RUYWcgPSB0aGlzLl9nZXRGaXJzdFRhZ0luTGluZShzZXNzaW9uLCByb3cpOwogICAgICAgIAogICAgICAgIGlmICghZmlyc3RUYWcpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIAogICAgICAgIHZhciBpc0JhY2t3YXJkID0gZmlyc3RUYWcuY2xvc2luZyB8fCBmaXJzdFRhZy5zZWxmQ2xvc2luZzsKICAgICAgICB2YXIgc3RhY2sgPSBbXTsKICAgICAgICB2YXIgdGFnOwogICAgICAgIAogICAgICAgIGlmICghaXNCYWNrd2FyZCkgewogICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBuZXcgVG9rZW5JdGVyYXRvcihzZXNzaW9uLCByb3csIGZpcnN0VGFnLnN0YXJ0LmNvbHVtbik7CiAgICAgICAgICAgIHZhciBzdGFydCA9IHsKICAgICAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICAgICAgY29sdW1uOiBmaXJzdFRhZy5zdGFydC5jb2x1bW4gKyBmaXJzdFRhZy50YWdOYW1lLmxlbmd0aCArIDIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKGZpcnN0VGFnLnN0YXJ0LnJvdyA9PSBmaXJzdFRhZy5lbmQucm93KQogICAgICAgICAgICAgICAgc3RhcnQuY29sdW1uID0gZmlyc3RUYWcuZW5kLmNvbHVtbjsKICAgICAgICAgICAgd2hpbGUgKHRhZyA9IHRoaXMuX3JlYWRUYWdGb3J3YXJkKGl0ZXJhdG9yKSkgewogICAgICAgICAgICAgICAgaWYgKHRhZy5zZWxmQ2xvc2luZykgewogICAgICAgICAgICAgICAgICAgIGlmICghc3RhY2subGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhZy5zdGFydC5jb2x1bW4gKz0gdGFnLnRhZ05hbWUubGVuZ3RoICsgMjsKICAgICAgICAgICAgICAgICAgICAgICAgdGFnLmVuZC5jb2x1bW4gLT0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJhbmdlLmZyb21Qb2ludHModGFnLnN0YXJ0LCB0YWcuZW5kKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmICh0YWcuY2xvc2luZykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX3BvcChzdGFjaywgdGFnKTsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RhY2subGVuZ3RoID09IDApCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSYW5nZS5mcm9tUG9pbnRzKHN0YXJ0LCB0YWcuc3RhcnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaCh0YWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBuZXcgVG9rZW5JdGVyYXRvcihzZXNzaW9uLCByb3csIGZpcnN0VGFnLmVuZC5jb2x1bW4pOwogICAgICAgICAgICB2YXIgZW5kID0gewogICAgICAgICAgICAgICAgcm93OiByb3csCiAgICAgICAgICAgICAgICBjb2x1bW46IGZpcnN0VGFnLnN0YXJ0LmNvbHVtbgogICAgICAgICAgICB9OwogICAgICAgICAgICAKICAgICAgICAgICAgd2hpbGUgKHRhZyA9IHRoaXMuX3JlYWRUYWdCYWNrd2FyZChpdGVyYXRvcikpIHsKICAgICAgICAgICAgICAgIGlmICh0YWcuc2VsZkNsb3NpbmcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YWNrLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICB0YWcuc3RhcnQuY29sdW1uICs9IHRhZy50YWdOYW1lLmxlbmd0aCArIDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhZy5lbmQuY29sdW1uIC09IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSYW5nZS5mcm9tUG9pbnRzKHRhZy5zdGFydCwgdGFnLmVuZCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoIXRhZy5jbG9zaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcG9wKHN0YWNrLCB0YWcpOwogICAgICAgICAgICAgICAgICAgIGlmIChzdGFjay5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0YWcuc3RhcnQuY29sdW1uICs9IHRhZy50YWdOYW1lLmxlbmd0aCArIDI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWcuc3RhcnQucm93ID09IHRhZy5lbmQucm93ICYmIHRhZy5zdGFydC5jb2x1bW4gPCB0YWcuZW5kLmNvbHVtbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZy5zdGFydC5jb2x1bW4gPSB0YWcuZW5kLmNvbHVtbjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJhbmdlLmZyb21Qb2ludHModGFnLnN0YXJ0LCBlbmQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2godGFnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgIH07Cgp9KS5jYWxsKEZvbGRNb2RlLnByb3RvdHlwZSk7Cgp9KTsKCmFjZS5kZWZpbmUoImFjZS9tb2RlL3htbCIsWyJyZXF1aXJlIiwiZXhwb3J0cyIsIm1vZHVsZSIsImFjZS9saWIvb29wIiwiYWNlL2xpYi9sYW5nIiwiYWNlL21vZGUvdGV4dCIsImFjZS9tb2RlL3htbF9oaWdobGlnaHRfcnVsZXMiLCJhY2UvbW9kZS9iZWhhdmlvdXIveG1sIiwiYWNlL21vZGUvZm9sZGluZy94bWwiLCJhY2Uvd29ya2VyL3dvcmtlcl9jbGllbnQiXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7CiJ1c2Ugc3RyaWN0IjsKCnZhciBvb3AgPSByZXF1aXJlKCIuLi9saWIvb29wIik7CnZhciBsYW5nID0gcmVxdWlyZSgiLi4vbGliL2xhbmciKTsKdmFyIFRleHRNb2RlID0gcmVxdWlyZSgiLi90ZXh0IikuTW9kZTsKdmFyIFhtbEhpZ2hsaWdodFJ1bGVzID0gcmVxdWlyZSgiLi94bWxfaGlnaGxpZ2h0X3J1bGVzIikuWG1sSGlnaGxpZ2h0UnVsZXM7CnZhciBYbWxCZWhhdmlvdXIgPSByZXF1aXJlKCIuL2JlaGF2aW91ci94bWwiKS5YbWxCZWhhdmlvdXI7CnZhciBYbWxGb2xkTW9kZSA9IHJlcXVpcmUoIi4vZm9sZGluZy94bWwiKS5Gb2xkTW9kZTsKdmFyIFdvcmtlckNsaWVudCA9IHJlcXVpcmUoIi4uL3dvcmtlci93b3JrZXJfY2xpZW50IikuV29ya2VyQ2xpZW50OwoKdmFyIE1vZGUgPSBmdW5jdGlvbigpIHsKICAgdGhpcy5IaWdobGlnaHRSdWxlcyA9IFhtbEhpZ2hsaWdodFJ1bGVzOwogICB0aGlzLiRiZWhhdmlvdXIgPSBuZXcgWG1sQmVoYXZpb3VyKCk7CiAgIHRoaXMuZm9sZGluZ1J1bGVzID0gbmV3IFhtbEZvbGRNb2RlKCk7Cn07Cgpvb3AuaW5oZXJpdHMoTW9kZSwgVGV4dE1vZGUpOwoKKGZ1bmN0aW9uKCkgewoKICAgIHRoaXMudm9pZEVsZW1lbnRzID0gbGFuZy5hcnJheVRvTWFwKFtdKTsKCiAgICB0aGlzLmJsb2NrQ29tbWVudCA9IHtzdGFydDogIjwhLS0iLCBlbmQ6ICItLT4ifTsKCiAgICB0aGlzLmNyZWF0ZVdvcmtlciA9IGZ1bmN0aW9uKHNlc3Npb24pIHsKICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlckNsaWVudChbImFjZSJdLCAiYWNlL21vZGUveG1sX3dvcmtlciIsICJXb3JrZXIiKTsKICAgICAgICB3b3JrZXIuYXR0YWNoVG9Eb2N1bWVudChzZXNzaW9uLmdldERvY3VtZW50KCkpOwoKICAgICAgICB3b3JrZXIub24oImVycm9yIiwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBzZXNzaW9uLnNldEFubm90YXRpb25zKGUuZGF0YSk7CiAgICAgICAgfSk7CgogICAgICAgIHdvcmtlci5vbigidGVybWluYXRlIiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHNlc3Npb24uY2xlYXJBbm5vdGF0aW9ucygpOwogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gd29ya2VyOwogICAgfTsKICAgIAogICAgdGhpcy4kaWQgPSAiYWNlL21vZGUveG1sIjsKfSkuY2FsbChNb2RlLnByb3RvdHlwZSk7CgpleHBvcnRzLk1vZGUgPSBNb2RlOwp9KTsK</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="2527847454" offset="0" length="4683" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>