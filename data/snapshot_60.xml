<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="60">
  <HTTPTask id="4536" hostname="diperf-wf1f52214.dispatcher.int.sap.hana.ondemand.com" path="/resources/~5cfddba6c4c93a9574da8795b231db9795ec15e1~/sap/watt/ideplatform/plugin/aceeditor/control/lib/ace-noconflict/mode-java.js" url="https://diperf-wf1f52214.dispatcher.int.sap.hana.ondemand.com/resources/~5cfddba6c4c93a9574da8795b231db9795ec15e1~/sap/watt/ideplatform/plugin/aceeditor/control/lib/ace-noconflict/mode-java.js" ip="172.16.59.30" port="443" connectionId="114" origin="Primary" frame="1" startDateTime="2017-09-26T14:11:36.414+03:00" startTime="2531674188" endTime="2531674266">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Host" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZGlwZXJmLXdmMWY1MjIxNC5kaXNwYXRjaGVyLmludC5zYXAuaGFuYS5vbmRlbWFuZC5jb20=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzYxLjAuMzE2My4xMDAgU2FmYXJpLzUzNy4zNg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9kaXBlcmYtd2YxZjUyMjE0LmRpc3BhdGNoZXIuaW50LnNhcC5oYW5hLm9uZGVtYW5kLmNvbS8=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsaGUtSUw7cT0wLjgsaGU7cT0wLjYsZW47cT0wLjQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QklHaXBTZXJ2ZXJkaXNwYXRjaGVyLmludC5zYXAuaGFuYS5vbmRlbWFuZC5jb209IUpvcWRucjd0eDdsdjJpOGp3OXZsamlTdXhpZGpNdTFXOGcxUDZGYUhNNkZIcFhkYnk3cjFJNXNaUU94azEvY3pFcEFmeFpjbGpxeW9Hdz09OyBKU0VTU0lPTklEPTk0MUNGQTU1QTkwRjE5ODc1QTkyMDhFMUFCRTE4QUVCM0NEQjA1OTZDOTdEMzU5MTMyNTE1Q0E3QjYzMDVDMjM7IEpURU5BTlRTRVNTSU9OSURfd2YxZjUyMjE0PXNBcVZxT2dyam8wOEhlSGNhR2ZIcVRLNSUyQjdxNlh2d1paMHBHT3NJSXRNUSUzRDsgX3N3YV9yZWYuN2E3YWIyZmUtM2NmOS00ZWFiLTg5MmEtOWRjODBjYWQwY2E1LjAwNzk9JTVCJTIyJTIyJTJDJTIyJTIyJTJDMTUwNjQyMzkwMSUyQyUyMmh0dHAlM0ElMkYlMkYxMC4yNi4xNTYuMTI1JTNBNTAwMDAlMkZzYW1sMiUyRmlkcCUyRnNzbyUyMiU1RDsgX3BrX2lkLjdhN2FiMmZlLTNjZjktNGVhYi04OTJhLTlkYzgwY2FkMGNhNS4wMDc5PTVkODc0MzhiNTc1MzQ3N2MuMTUwNjQyMzkwMC4wLjE1MDY0MjM5NzQuLjsgX3N3YV9pZC43YTdhYjJmZS0zY2Y5LTRlYWItODkyYS05ZGM4MGNhZDBjYTUuMDA3OT03Y2QzMmI1YWYxZWE5MWEyLjE1MDY0MjM5MDEuMS4xNTA2NDI0MDM0LjE1MDY0MjM5MDEuOyBfc3dhX3Nlcy43YTdhYjJmZS0zY2Y5LTRlYWItODkyYS05ZGM4MGNhZDBjYTUuMDA3OT0q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9yZXNvdXJjZXMvfjVjZmRkYmE2YzRjOTNhOTU3NGRhODc5NWIyMzFkYjk3OTVlYzE1ZTF+L3NhcC93YXR0L2lkZXBsYXRmb3JtL3BsdWdpbi9hY2VlZGl0b3IvY29udHJvbC9saWIvYWNlLW5vY29uZmxpY3QvbW9kZS1qYXZhLmpzIEhUVFAvMS4xDQpIb3N0OiBkaXBlcmYtd2YxZjUyMjE0LmRpc3BhdGNoZXIuaW50LnNhcC5oYW5hLm9uZGVtYW5kLmNvbQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzYxLjAuMzE2My4xMDAgU2FmYXJpLzUzNy4zNg0KQWNjZXB0OiAqLyoNClJlZmVyZXI6IGh0dHBzOi8vZGlwZXJmLXdmMWY1MjIxNC5kaXNwYXRjaGVyLmludC5zYXAuaGFuYS5vbmRlbWFuZC5jb20vDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGhlLUlMO3E9MC44LGhlO3E9MC42LGVuO3E9MC40DQpDb29raWU6IEJJR2lwU2VydmVyZGlzcGF0Y2hlci5pbnQuc2FwLmhhbmEub25kZW1hbmQuY29tPSFKb3FkbnI3dHg3bHYyaThqdzl2bGppU3V4aWRqTXUxVzhnMVA2RmFITTZGSHBYZGJ5N3IxSTVzWlFPeGsxL2N6RXBBZnhaY2xqcXlvR3c9PTsgSlNFU1NJT05JRD05NDFDRkE1NUE5MEYxOTg3NUE5MjA4RTFBQkUxOEFFQjNDREIwNTk2Qzk3RDM1OTEzMjUxNUNBN0I2MzA1QzIzOyBKVEVOQU5UU0VTU0lPTklEX3dmMWY1MjIxND1zQXFWcU9ncmpvMDhIZUhjYUdmSHFUSzUlMkI3cTZYdndaWjBwR09zSUl0TVElM0Q7IF9zd2FfcmVmLjdhN2FiMmZlLTNjZjktNGVhYi04OTJhLTlkYzgwY2FkMGNhNS4wMDc5PSU1QiUyMiUyMiUyQyUyMiUyMiUyQzE1MDY0MjM5MDElMkMlMjJodHRwJTNBJTJGJTJGMTAuMjYuMTU2LjEyNSUzQTUwMDAwJTJGc2FtbDIlMkZpZHAlMkZzc28lMjIlNUQ7IF9wa19pZC43YTdhYjJmZS0zY2Y5LTRlYWItODkyYS05ZGM4MGNhZDBjYTUuMDA3OT01ZDg3NDM4YjU3NTM0NzdjLjE1MDY0MjM5MDAuMC4xNTA2NDIzOTc0Li47IF9zd2FfaWQuN2E3YWIyZmUtM2NmOS00ZWFiLTg5MmEtOWRjODBjYWQwY2E1LjAwNzk9N2NkMzJiNWFmMWVhOTFhMi4xNTA2NDIzOTAxLjEuMTUwNjQyNDAzNC4xNTA2NDIzOTAxLjsgX3N3YV9zZXMuN2E3YWIyZmUtM2NmOS00ZWFiLTg5MmEtOWRjODBjYWQwY2E1LjAwNzk9Kg0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="BIGipServerdispatcher.int.sap.hana.ondemand.com" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IUpvcWRucjd0eDdsdjJpOGp3OXZsamlTdXhpZGpNdTFXOGcxUDZGYUhNNkZIcFhkYnk3cjFJNXNaUU94azEvY3pFcEFmeFpjbGpxeW9Hdz09</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="JSESSIONID" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>OTQxQ0ZBNTVBOTBGMTk4NzVBOTIwOEUxQUJFMThBRUIzQ0RCMDU5NkM5N0QzNTkxMzI1MTVDQTdCNjMwNUMyMw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="JTENANTSESSIONID_wf1f52214" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c0FxVnFPZ3JqbzA4SGVIY2FHZkhxVEs1JTJCN3E2WHZ3WlowcEdPc0lJdE1RJTNE</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_swa_ref.7a7ab2fe-3cf9-4eab-892a-9dc80cad0ca5.0079" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>JTVCJTIyJTIyJTJDJTIyJTIyJTJDMTUwNjQyMzkwMSUyQyUyMmh0dHAlM0ElMkYlMkYxMC4yNi4xNTYuMTI1JTNBNTAwMDAlMkZzYW1sMiUyRmlkcCUyRnNzbyUyMiU1RA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_pk_id.7a7ab2fe-3cf9-4eab-892a-9dc80cad0ca5.0079" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NWQ4NzQzOGI1NzUzNDc3Yy4xNTA2NDIzOTAwLjAuMTUwNjQyMzk3NC4u</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_swa_id.7a7ab2fe-3cf9-4eab-892a-9dc80cad0ca5.0079" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>N2NkMzJiNWFmMWVhOTFhMi4xNTA2NDIzOTAxLjEuMTUwNjQyNDAzNC4xNTA2NDIzOTAxLg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="_swa_ses.7a7ab2fe-3cf9-4eab-892a-9dc80cad0ca5.0079" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Cache-Control" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NWNmZGRiYTZjNGM5M2E5NTc0ZGE4Nzk1YjIzMWRiOTc5NWVjMTVlMQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Transfer-Encoding" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2h1bmtlZA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAyNiBTZXAgMjAxNyAxMTowOToyNiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U0FQ</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDYWNoZS1Db250cm9sOiBwdWJsaWMsIG1heC1hZ2U9MzE1MzYwMDANCkVUYWc6IDVjZmRkYmE2YzRjOTNhOTU3NGRhODc5NWIyMzFkYjk3OTVlYzE1ZTENCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWQNCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KRGF0ZTogVHVlLCAyNiBTZXAgMjAxNyAxMTowOToyNiBHTVQNClNlcnZlcjogU0FQDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWluczsgcHJlbG9hZA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>YWNlLmRlZmluZSgiYWNlL21vZGUvZG9jX2NvbW1lbnRfaGlnaGxpZ2h0X3J1bGVzIixbInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIiwiYWNlL2xpYi9vb3AiLCJhY2UvbW9kZS90ZXh0X2hpZ2hsaWdodF9ydWxlcyJdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKInVzZSBzdHJpY3QiOwoKdmFyIG9vcCA9IHJlcXVpcmUoIi4uL2xpYi9vb3AiKTsKdmFyIFRleHRIaWdobGlnaHRSdWxlcyA9IHJlcXVpcmUoIi4vdGV4dF9oaWdobGlnaHRfcnVsZXMiKS5UZXh0SGlnaGxpZ2h0UnVsZXM7Cgp2YXIgRG9jQ29tbWVudEhpZ2hsaWdodFJ1bGVzID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLiRydWxlcyA9IHsKICAgICAgICAic3RhcnQiIDogWyB7CiAgICAgICAgICAgIHRva2VuIDogImNvbW1lbnQuZG9jLnRhZyIsCiAgICAgICAgICAgIHJlZ2V4IDogIkBbXFx3XFxkX10rIiAvLyBUT0RPOiBmaXggZW1haWwgYWRkcmVzc2VzCiAgICAgICAgfSwgCiAgICAgICAgRG9jQ29tbWVudEhpZ2hsaWdodFJ1bGVzLmdldFRhZ1J1bGUoKSwKICAgICAgICB7CiAgICAgICAgICAgIGRlZmF1bHRUb2tlbiA6ICJjb21tZW50LmRvYyIsCiAgICAgICAgICAgIGNhc2VJbnNlbnNpdGl2ZTogdHJ1ZQogICAgICAgIH1dCiAgICB9Owp9OwoKb29wLmluaGVyaXRzKERvY0NvbW1lbnRIaWdobGlnaHRSdWxlcywgVGV4dEhpZ2hsaWdodFJ1bGVzKTsKCkRvY0NvbW1lbnRIaWdobGlnaHRSdWxlcy5nZXRUYWdSdWxlID0gZnVuY3Rpb24oc3RhcnQpIHsKICAgIHJldHVybiB7CiAgICAgICAgdG9rZW4gOiAiY29tbWVudC5kb2MudGFnLnN0b3JhZ2UudHlwZSIsCiAgICAgICAgcmVnZXggOiAiXFxiKD86VE9ET3xGSVhNRXxYWFh8SEFDSylcXGIiCiAgICB9Owp9CgpEb2NDb21tZW50SGlnaGxpZ2h0UnVsZXMuZ2V0U3RhcnRSdWxlID0gZnVuY3Rpb24oc3RhcnQpIHsKICAgIHJldHVybiB7CiAgICAgICAgdG9rZW4gOiAiY29tbWVudC5kb2MiLCAvLyBkb2MgY29tbWVudAogICAgICAgIHJlZ2V4IDogIlxcL1xcKig/PVxcKikiLAogICAgICAgIG5leHQgIDogc3RhcnQKICAgIH07Cn07CgpEb2NDb21tZW50SGlnaGxpZ2h0UnVsZXMuZ2V0RW5kUnVsZSA9IGZ1bmN0aW9uIChzdGFydCkgewogICAgcmV0dXJuIHsKICAgICAgICB0b2tlbiA6ICJjb21tZW50LmRvYyIsIC8vIGNsb3NpbmcgY29tbWVudAogICAgICAgIHJlZ2V4IDogIlxcKlxcLyIsCiAgICAgICAgbmV4dCAgOiBzdGFydAogICAgfTsKfTsKCgpleHBvcnRzLkRvY0NvbW1lbnRIaWdobGlnaHRSdWxlcyA9IERvY0NvbW1lbnRIaWdobGlnaHRSdWxlczsKCn0pOwoKYWNlLmRlZmluZSgiYWNlL21vZGUvamF2YXNjcmlwdF9oaWdobGlnaHRfcnVsZXMiLFsicmVxdWlyZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJhY2UvbGliL29vcCIsImFjZS9tb2RlL2RvY19jb21tZW50X2hpZ2hsaWdodF9ydWxlcyIsImFjZS9tb2RlL3RleHRfaGlnaGxpZ2h0X3J1bGVzIl0sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewoidXNlIHN0cmljdCI7Cgp2YXIgb29wID0gcmVxdWlyZSgiLi4vbGliL29vcCIpOwp2YXIgRG9jQ29tbWVudEhpZ2hsaWdodFJ1bGVzID0gcmVxdWlyZSgiLi9kb2NfY29tbWVudF9oaWdobGlnaHRfcnVsZXMiKS5Eb2NDb21tZW50SGlnaGxpZ2h0UnVsZXM7CnZhciBUZXh0SGlnaGxpZ2h0UnVsZXMgPSByZXF1aXJlKCIuL3RleHRfaGlnaGxpZ2h0X3J1bGVzIikuVGV4dEhpZ2hsaWdodFJ1bGVzOwp2YXIgaWRlbnRpZmllclJlID0gIlthLXpBLVpcXCRfXHUwMGExLVx1ZmZmZl1bYS16QS1aXFxkXFwkX1x1MDBhMS1cdWZmZmZdKiI7Cgp2YXIgSmF2YVNjcmlwdEhpZ2hsaWdodFJ1bGVzID0gZnVuY3Rpb24ob3B0aW9ucykgewogICAgdmFyIGtleXdvcmRNYXBwZXIgPSB0aGlzLmNyZWF0ZUtleXdvcmRNYXBwZXIoewogICAgICAgICJ2YXJpYWJsZS5sYW5ndWFnZSI6CiAgICAgICAgICAgICJBcnJheXxCb29sZWFufERhdGV8RnVuY3Rpb258SXRlcmF0b3J8TnVtYmVyfE9iamVjdHxSZWdFeHB8U3RyaW5nfFByb3h5fCIgICsgLy8gQ29uc3RydWN0b3JzCiAgICAgICAgICAgICJOYW1lc3BhY2V8UU5hbWV8WE1MfFhNTExpc3R8IiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgLy8gRTRYCiAgICAgICAgICAgICJBcnJheUJ1ZmZlcnxGbG9hdDMyQXJyYXl8RmxvYXQ2NEFycmF5fEludDE2QXJyYXl8SW50MzJBcnJheXxJbnQ4QXJyYXl8IiAgICsKICAgICAgICAgICAgIlVpbnQxNkFycmF5fFVpbnQzMkFycmF5fFVpbnQ4QXJyYXl8VWludDhDbGFtcGVkQXJyYXl8IiAgICAgICAgICAgICAgICAgICAgKwogICAgICAgICAgICAiRXJyb3J8RXZhbEVycm9yfEludGVybmFsRXJyb3J8UmFuZ2VFcnJvcnxSZWZlcmVuY2VFcnJvcnxTdG9wSXRlcmF0aW9ufCIgICArIC8vIEVycm9ycwogICAgICAgICAgICAiU3ludGF4RXJyb3J8VHlwZUVycm9yfFVSSUVycm9yfCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArCiAgICAgICAgICAgICJkZWNvZGVVUkl8ZGVjb2RlVVJJQ29tcG9uZW50fGVuY29kZVVSSXxlbmNvZGVVUklDb21wb25lbnR8ZXZhbHxpc0Zpbml0ZXwiICsgLy8gTm9uLWNvbnN0cnVjdG9yIGZ1bmN0aW9ucwogICAgICAgICAgICAiaXNOYU58cGFyc2VGbG9hdHxwYXJzZUludHwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArCiAgICAgICAgICAgICJKU09OfE1hdGh8IiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgLy8gT3RoZXIKICAgICAgICAgICAgInRoaXN8YXJndW1lbnRzfHByb3RvdHlwZXx3aW5kb3d8ZG9jdW1lbnQiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAvLyBQc2V1ZG8KICAgICAgICAia2V5d29yZCI6CiAgICAgICAgICAgICJjb25zdHx5aWVsZHxpbXBvcnR8Z2V0fHNldHxhc3luY3xhd2FpdHwiICsKICAgICAgICAgICAgImJyZWFrfGNhc2V8Y2F0Y2h8Y29udGludWV8ZGVmYXVsdHxkZWxldGV8ZG98ZWxzZXxmaW5hbGx5fGZvcnxmdW5jdGlvbnwiICsKICAgICAgICAgICAgImlmfGlufGluc3RhbmNlb2Z8bmV3fHJldHVybnxzd2l0Y2h8dGhyb3d8dHJ5fHR5cGVvZnxsZXR8dmFyfHdoaWxlfHdpdGh8ZGVidWdnZXJ8IiArCiAgICAgICAgICAgICJfX3BhcmVudF9ffF9fY291bnRfX3xlc2NhcGV8dW5lc2NhcGV8d2l0aHxfX3Byb3RvX198IiArCiAgICAgICAgICAgICJjbGFzc3xlbnVtfGV4dGVuZHN8c3VwZXJ8ZXhwb3J0fGltcGxlbWVudHN8cHJpdmF0ZXxwdWJsaWN8aW50ZXJmYWNlfHBhY2thZ2V8cHJvdGVjdGVkfHN0YXRpYyIsCiAgICAgICAgInN0b3JhZ2UudHlwZSI6CiAgICAgICAgICAgICJjb25zdHxsZXR8dmFyfGZ1bmN0aW9uIiwKICAgICAgICAiY29uc3RhbnQubGFuZ3VhZ2UiOgogICAgICAgICAgICAibnVsbHxJbmZpbml0eXxOYU58dW5kZWZpbmVkIiwKICAgICAgICAic3VwcG9ydC5mdW5jdGlvbiI6CiAgICAgICAgICAgICJhbGVydCIsCiAgICAgICAgImNvbnN0YW50Lmxhbmd1YWdlLmJvb2xlYW4iOiAidHJ1ZXxmYWxzZSIKICAgIH0sICJpZGVudGlmaWVyIik7CiAgICB2YXIga3dCZWZvcmVSZSA9ICJjYXNlfGRvfGVsc2V8ZmluYWxseXxpbnxpbnN0YW5jZW9mfHJldHVybnx0aHJvd3x0cnl8dHlwZW9mfHlpZWxkfHZvaWQiOwoKICAgIHZhciBlc2NhcGVkUmUgPSAiXFxcXCg/OnhbMC05YS1mQS1GXXsyfXwiICsgLy8gaGV4CiAgICAgICAgInVbMC05YS1mQS1GXXs0fXwiICsgLy8gdW5pY29kZQogICAgICAgICJ1e1swLTlhLWZBLUZdezEsNn19fCIgKyAvLyBlczYgdW5pY29kZQogICAgICAgICJbMC0yXVswLTddezAsMn18IiArIC8vIG9jdAogICAgICAgICIzWzAtN11bMC03XT98IiArIC8vIG9jdAogICAgICAgICJbNC03XVswLTddP3wiICsgLy9vY3QKICAgICAgICAiLikiOwoKICAgIHRoaXMuJHJ1bGVzID0gewogICAgICAgICJub19yZWdleCIgOiBbCiAgICAgICAgICAgIERvY0NvbW1lbnRIaWdobGlnaHRSdWxlcy5nZXRTdGFydFJ1bGUoImRvYy1zdGFydCIpLAogICAgICAgICAgICBjb21tZW50cygibm9fcmVnZXgiKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9rZW4gOiAic3RyaW5nIiwKICAgICAgICAgICAgICAgIHJlZ2V4IDogIicoPz0uKSIsCiAgICAgICAgICAgICAgICBuZXh0ICA6ICJxc3RyaW5nIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJzdHJpbmciLAogICAgICAgICAgICAgICAgcmVnZXggOiAnIig/PS4pJywKICAgICAgICAgICAgICAgIG5leHQgIDogInFxc3RyaW5nIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJjb25zdGFudC5udW1lcmljIiwgLy8gaGV4CiAgICAgICAgICAgICAgICByZWdleCA6IC8wKD86W3hYXVswLTlhLWZBLUZdK3xbYkJdWzAxXSspXGIvCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuIDogImNvbnN0YW50Lm51bWVyaWMiLCAvLyBmbG9hdAogICAgICAgICAgICAgICAgcmVnZXggOiAvWystXT9cZFtcZF9dKig/Oig/OlwuXGQqKT8oPzpbZUVdWystXT9cZCspPyk/XGIvCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuIDogWwogICAgICAgICAgICAgICAgICAgICJzdG9yYWdlLnR5cGUiLCAicHVuY3R1YXRpb24ub3BlcmF0b3IiLCAic3VwcG9ydC5mdW5jdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgInB1bmN0dWF0aW9uLm9wZXJhdG9yIiwgImVudGl0eS5uYW1lLmZ1bmN0aW9uIiwgInRleHQiLCJrZXl3b3JkLm9wZXJhdG9yIgogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHJlZ2V4IDogIigiICsgaWRlbnRpZmllclJlICsgIikoXFwuKShwcm90b3R5cGUpKFxcLikoIiArIGlkZW50aWZpZXJSZSArIikoXFxzKikoPSkiLAogICAgICAgICAgICAgICAgbmV4dDogImZ1bmN0aW9uX2FyZ3VtZW50cyIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW4gOiBbCiAgICAgICAgICAgICAgICAgICAgInN0b3JhZ2UudHlwZSIsICJwdW5jdHVhdGlvbi5vcGVyYXRvciIsICJlbnRpdHkubmFtZS5mdW5jdGlvbiIsICJ0ZXh0IiwKICAgICAgICAgICAgICAgICAgICAia2V5d29yZC5vcGVyYXRvciIsICJ0ZXh0IiwgInN0b3JhZ2UudHlwZSIsICJ0ZXh0IiwgInBhcmVuLmxwYXJlbiIKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICByZWdleCA6ICIoIiArIGlkZW50aWZpZXJSZSArICIpKFxcLikoIiArIGlkZW50aWZpZXJSZSArIikoXFxzKikoPSkoXFxzKikoZnVuY3Rpb24pKFxccyopKFxcKCkiLAogICAgICAgICAgICAgICAgbmV4dDogImZ1bmN0aW9uX2FyZ3VtZW50cyIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW4gOiBbCiAgICAgICAgICAgICAgICAgICAgImVudGl0eS5uYW1lLmZ1bmN0aW9uIiwgInRleHQiLCAia2V5d29yZC5vcGVyYXRvciIsICJ0ZXh0IiwgInN0b3JhZ2UudHlwZSIsCiAgICAgICAgICAgICAgICAgICAgInRleHQiLCAicGFyZW4ubHBhcmVuIgogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHJlZ2V4IDogIigiICsgaWRlbnRpZmllclJlICsiKShcXHMqKSg9KShcXHMqKShmdW5jdGlvbikoXFxzKikoXFwoKSIsCiAgICAgICAgICAgICAgICBuZXh0OiAiZnVuY3Rpb25fYXJndW1lbnRzIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6IFsKICAgICAgICAgICAgICAgICAgICAic3RvcmFnZS50eXBlIiwgInB1bmN0dWF0aW9uLm9wZXJhdG9yIiwgImVudGl0eS5uYW1lLmZ1bmN0aW9uIiwgInRleHQiLAogICAgICAgICAgICAgICAgICAgICJrZXl3b3JkLm9wZXJhdG9yIiwgInRleHQiLAogICAgICAgICAgICAgICAgICAgICJzdG9yYWdlLnR5cGUiLCAidGV4dCIsICJlbnRpdHkubmFtZS5mdW5jdGlvbiIsICJ0ZXh0IiwgInBhcmVuLmxwYXJlbiIKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICByZWdleCA6ICIoIiArIGlkZW50aWZpZXJSZSArICIpKFxcLikoIiArIGlkZW50aWZpZXJSZSArIikoXFxzKikoPSkoXFxzKikoZnVuY3Rpb24pKFxccyspKFxcdyspKFxccyopKFxcKCkiLAogICAgICAgICAgICAgICAgbmV4dDogImZ1bmN0aW9uX2FyZ3VtZW50cyIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW4gOiBbCiAgICAgICAgICAgICAgICAgICAgInN0b3JhZ2UudHlwZSIsICJ0ZXh0IiwgImVudGl0eS5uYW1lLmZ1bmN0aW9uIiwgInRleHQiLCAicGFyZW4ubHBhcmVuIgogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHJlZ2V4IDogIihmdW5jdGlvbikoXFxzKykoIiArIGlkZW50aWZpZXJSZSArICIpKFxccyopKFxcKCkiLAogICAgICAgICAgICAgICAgbmV4dDogImZ1bmN0aW9uX2FyZ3VtZW50cyIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW4gOiBbCiAgICAgICAgICAgICAgICAgICAgImVudGl0eS5uYW1lLmZ1bmN0aW9uIiwgInRleHQiLCAicHVuY3R1YXRpb24ub3BlcmF0b3IiLAogICAgICAgICAgICAgICAgICAgICJ0ZXh0IiwgInN0b3JhZ2UudHlwZSIsICJ0ZXh0IiwgInBhcmVuLmxwYXJlbiIKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICByZWdleCA6ICIoIiArIGlkZW50aWZpZXJSZSArICIpKFxccyopKDopKFxccyopKGZ1bmN0aW9uKShcXHMqKShcXCgpIiwKICAgICAgICAgICAgICAgIG5leHQ6ICJmdW5jdGlvbl9hcmd1bWVudHMiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuIDogWwogICAgICAgICAgICAgICAgICAgICJ0ZXh0IiwgInRleHQiLCAic3RvcmFnZS50eXBlIiwgInRleHQiLCAicGFyZW4ubHBhcmVuIgogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHJlZ2V4IDogIig6KShcXHMqKShmdW5jdGlvbikoXFxzKikoXFwoKSIsCiAgICAgICAgICAgICAgICBuZXh0OiAiZnVuY3Rpb25fYXJndW1lbnRzIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJrZXl3b3JkIiwKICAgICAgICAgICAgICAgIHJlZ2V4IDogIig/OiIgKyBrd0JlZm9yZVJlICsgIilcXGIiLAogICAgICAgICAgICAgICAgbmV4dCA6ICJzdGFydCIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW4gOiBbInN1cHBvcnQuY29uc3RhbnQiXSwKICAgICAgICAgICAgICAgIHJlZ2V4IDogL3RoYXRcYi8KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW4gOiBbInN0b3JhZ2UudHlwZSIsICJwdW5jdHVhdGlvbi5vcGVyYXRvciIsICJzdXBwb3J0LmZ1bmN0aW9uLmZpcmVidWciXSwKICAgICAgICAgICAgICAgIHJlZ2V4IDogLyhjb25zb2xlKShcLikod2FybnxpbmZvfGxvZ3xlcnJvcnx0aW1lfHRyYWNlfHRpbWVFbmR8YXNzZXJ0KVxiLwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6IGtleXdvcmRNYXBwZXIsCiAgICAgICAgICAgICAgICByZWdleCA6IGlkZW50aWZpZXJSZQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJwdW5jdHVhdGlvbi5vcGVyYXRvciIsCiAgICAgICAgICAgICAgICByZWdleCA6IC9bLl0oPyFbLl0pLywKICAgICAgICAgICAgICAgIG5leHQgIDogInByb3BlcnR5IgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJrZXl3b3JkLm9wZXJhdG9yIiwKICAgICAgICAgICAgICAgIHJlZ2V4IDogLy0tfFwrXCt8XC57M318PT09fD09fD18IT18IT09fDwrPT98Pis9P3whfCYmfFx8XHx8XD9cOnxbISQlJiorXC1+XC9eXT0/LywKICAgICAgICAgICAgICAgIG5leHQgIDogInN0YXJ0IgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJwdW5jdHVhdGlvbi5vcGVyYXRvciIsCiAgICAgICAgICAgICAgICByZWdleCA6IC9bPzosOy5dLywKICAgICAgICAgICAgICAgIG5leHQgIDogInN0YXJ0IgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJwYXJlbi5scGFyZW4iLAogICAgICAgICAgICAgICAgcmVnZXggOiAvW1xbKHtdLywKICAgICAgICAgICAgICAgIG5leHQgIDogInN0YXJ0IgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJwYXJlbi5ycGFyZW4iLAogICAgICAgICAgICAgICAgcmVnZXggOiAvW1xdKX1dLwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbjogImNvbW1lbnQiLAogICAgICAgICAgICAgICAgcmVnZXg6IC9eIyEuKiQvCiAgICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIHByb3BlcnR5OiBbewogICAgICAgICAgICAgICAgdG9rZW4gOiAidGV4dCIsCiAgICAgICAgICAgICAgICByZWdleCA6ICJcXHMrIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6IFsKICAgICAgICAgICAgICAgICAgICAic3RvcmFnZS50eXBlIiwgInB1bmN0dWF0aW9uLm9wZXJhdG9yIiwgImVudGl0eS5uYW1lLmZ1bmN0aW9uIiwgInRleHQiLAogICAgICAgICAgICAgICAgICAgICJrZXl3b3JkLm9wZXJhdG9yIiwgInRleHQiLAogICAgICAgICAgICAgICAgICAgICJzdG9yYWdlLnR5cGUiLCAidGV4dCIsICJlbnRpdHkubmFtZS5mdW5jdGlvbiIsICJ0ZXh0IiwgInBhcmVuLmxwYXJlbiIKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICByZWdleCA6ICIoIiArIGlkZW50aWZpZXJSZSArICIpKFxcLikoIiArIGlkZW50aWZpZXJSZSArIikoXFxzKikoPSkoXFxzKikoZnVuY3Rpb24pKD86KFxccyspKFxcdyspKT8oXFxzKikoXFwoKSIsCiAgICAgICAgICAgICAgICBuZXh0OiAiZnVuY3Rpb25fYXJndW1lbnRzIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJwdW5jdHVhdGlvbi5vcGVyYXRvciIsCiAgICAgICAgICAgICAgICByZWdleCA6IC9bLl0oPyFbLl0pLwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJzdXBwb3J0LmZ1bmN0aW9uIiwKICAgICAgICAgICAgICAgIHJlZ2V4IDogLyhzKD86aCg/OmlmdHxvdyg/Ok1vZCg/OmVsZXNzRGlhbG9nfGFsRGlhbG9nKXxIZWxwKSl8Y3JvbGwoPzpYfEJ5KD86UGFnZXN8TGluZXMpP3xZfFRvKT98dCg/Om9wfHJpa2UpfGkoPzpufHplVG9Db250ZW50fGRlYmFyfGduVGV4dCl8b3J0fHUoPzpwfGIoPzpzdHIoPzppbmcpPyk/KXxwbGkoPzpjZXx0KXxlKD86bmR8dCg/OlJlKD86c2l6YWJsZXxxdWVzdEhlYWRlcil8TSg/OmkoPzpudXRlc3xsbGlzZWNvbmRzKXxvbnRoKXxTZWNvbmRzfEhvKD86dEtleXN8dXJzKXxZZWFyfEN1cnNvcnxUaW1lKD86b3V0KT98SW50ZXJ2YWx8Wk9wdGlvbnN8RGF0ZXxVVEMoPzpNKD86aSg/Om51dGVzfGxsaXNlY29uZHMpfG9udGgpfFNlY29uZHN8SG91cnN8RGF0ZXxGdWxsWWVhcil8RnVsbFllYXJ8QWN0aXZlKXxhcmNoKXxxcnR8bGljZXxhdmVQcmVmZXJlbmNlc3xtYWxsKXxoKD86b21lfGFuZGxlRXZlbnQpfG5hdmlnYXRlfGMoPzpoYXIoPzpDb2RlQXR8QXQpfG8oPzpzfG4oPzpjYXR8dGV4dHVhbHxmaXJtKXxtcGlsZSl8ZWlsfGxlYXIoPzpUaW1lb3V0fEludGVydmFsKT98YSg/OnB0dXJlRXZlbnRzfGxsKXxyZWF0ZSg/OlN0eWxlU2hlZXR8UG9wdXB8RXZlbnRPYmplY3QpKXx0KD86byg/OkdNVFN0cmluZ3xTKD86dHJpbmd8b3VyY2UpfFUoPzpUQ1N0cmluZ3xwcGVyQ2FzZSl8TG8oPzpjYWxlU3RyaW5nfHdlckNhc2UpKXxlc3R8YSg/Om58aW50KD86RW5hYmxlZCk/KSl8aSg/OnMoPzpOYU58RmluaXRlKXxuZGV4T2Z8dGFsaWNzKXxkKD86aXNhYmxlRXh0ZXJuYWxDYXB0dXJlfHVtcHxldGFjaEV2ZW50KXx1KD86big/OnNoaWZ0fHRhaW50fGVzY2FwZXx3YXRjaCl8cGRhdGVDb21tYW5kcyl8aig/Om9pbnxhdmFFbmFibGVkKXxwKD86byg/OnB8dyl8dXNofGx1Z2lucy5yZWZyZXNofGEoPzpkZGluZ3N8cnNlKD86SW50fEZsb2F0KT8pfHIoPzppbnR8b21wdHxlZmVyZW5jZSkpfGUoPzpzY2FwZXxuYWJsZUV4dGVybmFsQ2FwdHVyZXx2YWx8bGVtZW50RnJvbVBvaW50fHgoPzpwfGVjKD86U2NyaXB0fENvbW1hbmQpPykpfHZhbHVlT2Z8VVRDfHF1ZXJ5Q29tbWFuZCg/OlN0YXRlfEluZGV0ZXJtfEVuYWJsZWR8VmFsdWUpfGYoPzppKD86bmR8bGUoPzpNb2RpZmllZERhdGV8U2l6ZXxDcmVhdGVkRGF0ZXxVcGRhdGVkRGF0ZSl8eGVkKXxvKD86bnQoPzpzaXplfGNvbG9yKXxyd2FyZCl8bG9vcnxyb21DaGFyQ29kZSl8d2F0Y2h8bCg/Omlua3xvKD86YWR8Zyl8YXN0SW5kZXhPZil8YSg/OnNpbnxuY2hvcnxjb3N8dCg/OnRhY2hFdmVudHxvYnxhbig/OjIpPyl8cHBseXxsZXJ0fGIoPzpzfG9ydCkpfHIoPzpvdSg/Om5kfHRlRXZlbnRzKXxlKD86c2l6ZSg/OkJ5fFRvKXxjYWxjfHR1cm5WYWx1ZXxwbGFjZXx2ZXJzZXxsKD86b2FkfGVhc2UoPzpDYXB0dXJlfEV2ZW50cykpKXxhbmRvbSl8Zyg/Om98ZXQoPzpSZXNwb25zZUhlYWRlcnxNKD86aSg/Om51dGVzfGxsaXNlY29uZHMpfG9udGgpfFNlKD86Y29uZHN8bGVjdGlvbil8SG91cnN8WWVhcnxUaW1lKD86em9uZU9mZnNldCk/fERhKD86eXx0ZSl8VVRDKD86TSg/OmkoPzpudXRlc3xsbGlzZWNvbmRzKXxvbnRoKXxTZWNvbmRzfEhvdXJzfERhKD86eXx0ZSl8RnVsbFllYXIpfEZ1bGxZZWFyfEEoPzp0dGVudGlvbnxsbFJlc3BvbnNlSGVhZGVycykpKXxtKD86aW58b3ZlKD86Qig/Onl8ZWxvdyl8VG8oPzpBYnNvbHV0ZSk/fEFib3ZlKXxlcmdlQXR0cmlidXRlc3xhKD86dGNofHJnaW5zfHgpKXxiKD86dG9hfGlnfG8oPzpsZHxyZGVyV2lkdGhzKXxsaW5rfGFjaykpXGIoPz1cKCkvCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuIDogInN1cHBvcnQuZnVuY3Rpb24uZG9tIiwKICAgICAgICAgICAgICAgIHJlZ2V4IDogLyhzKD86dWIoPzpzdHJpbmdEYXRhfG1pdCl8cGxpdFRleHR8ZSg/OnQoPzpOYW1lZEl0ZW18QXR0cmlidXRlKD86Tm9kZSk/KXxsZWN0KSl8aGFzKD86Q2hpbGROb2Rlc3xGZWF0dXJlKXxuYW1lZEl0ZW18Yyg/OmwoPzppY2t8byg/OnNlfG5lTm9kZSkpfHJlYXRlKD86Qyg/Om9tbWVudHxEQVRBU2VjdGlvbnxhcHRpb24pfFQoPzpIZWFkfGV4dE5vZGV8Rm9vdCl8RG9jdW1lbnRGcmFnbWVudHxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb258RSg/Om50aXR5UmVmZXJlbmNlfGxlbWVudCl8QXR0cmlidXRlKSl8dGFiSW5kZXh8aSg/Om5zZXJ0KD86Um93fEJlZm9yZXxDZWxsfERhdGEpfHRlbSl8b3BlbnxkZWxldGUoPzpSb3d8Qyg/OmVsbHxhcHRpb24pfFQoPzpIZWFkfEZvb3QpfERhdGEpfGZvY3VzfHdyaXRlKD86bG4pP3xhKD86ZGR8cHBlbmQoPzpDaGlsZHxEYXRhKSl8cmUoPzpzZXR8cGxhY2UoPzpDaGlsZHxEYXRhKXxtb3ZlKD86TmFtZWRJdGVtfENoaWxkfEF0dHJpYnV0ZSg/Ok5vZGUpPyk/KXxnZXQoPzpOYW1lZEl0ZW18RWxlbWVudCg/OnNCeSg/Ok5hbWV8VGFnTmFtZXxDbGFzc05hbWUpfEJ5SWQpfEF0dHJpYnV0ZSg/Ok5vZGUpPyl8Ymx1cilcYig/PVwoKS8KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW4gOiAgInN1cHBvcnQuY29uc3RhbnQiLAogICAgICAgICAgICAgICAgcmVnZXggOiAvKHMoPzp5c3RlbUxhbmd1YWdlfGNyKD86aXB0c3xvbGxiYXJzfGVlbig/Olh8WXxUb3B8TGVmdCkpfHQoPzp5bGUoPzpTaGVldHMpP3xhdHVzKD86VGV4dHxiYXIpPyl8aWJsaW5nKD86QmVsb3d8QWJvdmUpfG91cmNlfHVmZml4ZXN8ZSg/OmN1cml0eSg/OlBvbGljeSk/fGwoPzplY3Rpb258ZikpKXxoKD86aXN0b3J5fG9zdCg/Om5hbWUpP3xhcyg/Omh8Rm9jdXMpKXx5fFgoPzpNTERvY3VtZW50fFNMRG9jdW1lbnQpfG4oPzpleHR8YW1lKD86c3BhY2UoPzpzfFVSSSl8UHJvcCkpfE0oPzpJTl9WQUxVRXxBWF9WQUxVRSl8Yyg/OmhhcmFjdGVyU2V0fG8oPzpuKD86c3RydWN0b3J8dHJvbGxlcnMpfG9raWVFbmFibGVkfGxvckRlcHRofG1wKD86b25lbnRzfGxldGUpKXx1cnJlbnR8cHVDbGFzc3xsKD86aSg/OnAoPzpib2FyZERhdGEpP3xlbnRJbmZvcm1hdGlvbil8b3NlZHxhc3Nlcyl8YWxsZSg/OmV8cil8cnlwdG8pfHQoPzpvKD86b2xiYXJ8cCl8ZXh0KD86VHJhbnNmb3JtfEluZGVudHxEZWNvcmF0aW9ufEFsaWduKXxhZ3MpfFNRUlQoPzoxXzJ8Mil8aSg/Om4oPzpuZXIoPzpIZWlnaHR8V2lkdGgpfHB1dCl8ZHN8Z25vcmVDYXNlKXx6SW5kZXh8byg/OnNjcHV8big/OnJlYWR5c3RhdGVjaGFuZ2V8TGluZSl8dXRlcig/OkhlaWdodHxXaWR0aCl8cCg/OnNQcm9maWxlfGVuZXIpfGZmc2NyZWVuQnVmZmVyaW5nKXxORUdBVElWRV9JTkZJTklUWXxkKD86aSg/OnNwbGF5fGFsb2coPzpIZWlnaHR8VG9wfFdpZHRofExlZnR8QXJndW1lbnRzKXxyZWN0b3JpZXMpfGUoPzpzY3JpcHRpb258ZmF1bHQoPzpTdGF0dXN8Q2goPzplY2tlZHxhcnNldCl8VmlldykpKXx1KD86c2VyKD86UHJvZmlsZXxMYW5ndWFnZXxBZ2VudCl8big/OmlxdWVJRHxkZWZpbmVkKXxwZGF0ZUludGVydmFsKXxfY29udGVudHxwKD86aXhlbERlcHRofG9ydHxlcnNvbmFsYmFyfGtjczExfGwoPzp1Z2luc3xhdGZvcm0pfGEoPzp0aG5hbWV8ZGRpbmcoPzpSaWdodHxCb3R0b218VG9wfExlZnQpfHJlbnQoPzpXaW5kb3d8TGF5ZXIpP3xnZSg/OlgoPzpPZmZzZXQpP3xZKD86T2Zmc2V0KT8pKXxyKD86byg/OnRvKD86Y29sfHR5cGUpfGR1Y3QoPzpTdWIpP3xtcHRlcil8ZSg/OnZpb3VzfGZpeCkpKXxlKD86big/OmNvZGluZ3xhYmxlZFBsdWdpbil8eCg/OnRlcm5hbHxwYW5kbyl8bWJlZHMpfHYoPzppc2liaWxpdHl8ZW5kb3IoPzpTdWIpP3xMaW5rY29sb3IpfFVSTFVuZW5jb2RlZHxQKD86SXxPU0lUSVZFX0lORklOSVRZKXxmKD86aWxlbmFtZXxvKD86bnQoPzpTaXplfEZhbWlseXxXZWlnaHQpfHJtTmFtZSl8cmFtZSg/OnN8RWxlbWVudCl8Z0NvbG9yKXxFfHdoaXRlU3BhY2V8bCg/OmkoPzpzdFN0eWxlVHlwZXxuKD86ZUhlaWdodHxrQ29sb3IpKXxvKD86Y2EoPzp0aW9uKD86YmFyKT98bE5hbWUpfHdzcmMpfGUoPzpuZ3RofGZ0KD86Q29udGV4dCk/KXxhKD86c3QoPzpNKD86b2RpZmllZHxhdGNoKXxJbmRleHxQYXJlbil8eWVyKD86c3xYKXxuZ3VhZ2UpKXxhKD86cHAoPzpNaW5vclZlcnNpb258TmFtZXxDbyg/OmRlTmFtZXxyZSl8VmVyc2lvbil8dmFpbCg/OkhlaWdodHxUb3B8V2lkdGh8TGVmdCl8bGx8cig/Oml0eXxndW1lbnRzKXxMaW5rY29sb3J8Ym92ZSl8cig/OmlnaHQoPzpDb250ZXh0KT98ZSg/OnNwb25zZSg/OlhNTHxUZXh0KXxhZHlTdGF0ZSkpfGdsb2JhbHx4fG0oPzppbWVUeXBlc3x1bHRpbGluZXxlbnViYXJ8YXJnaW4oPzpSaWdodHxCb3R0b218VG9wfExlZnQpKXxMKD86Tig/OjEwfDIpfE9HKD86MTBFfDJFKSl8Yig/Om8oPzp0dG9tfHJkZXIoPzpXaWR0aHxSaWdodFdpZHRofEJvdHRvbVdpZHRofFN0eWxlfENvbG9yfFRvcFdpZHRofExlZnRXaWR0aCkpfHVmZmVyRGVwdGh8ZWxvd3xhY2tncm91bmQoPzpDb2xvcnxJbWFnZSkpKVxiLwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJpZGVudGlmaWVyIiwKICAgICAgICAgICAgICAgIHJlZ2V4IDogaWRlbnRpZmllclJlCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJlZ2V4OiAiIiwKICAgICAgICAgICAgICAgIHRva2VuOiAiZW1wdHkiLAogICAgICAgICAgICAgICAgbmV4dDogIm5vX3JlZ2V4IgogICAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICAic3RhcnQiOiBbCiAgICAgICAgICAgIERvY0NvbW1lbnRIaWdobGlnaHRSdWxlcy5nZXRTdGFydFJ1bGUoImRvYy1zdGFydCIpLAogICAgICAgICAgICBjb21tZW50cygic3RhcnQiKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9rZW46ICJzdHJpbmcucmVnZXhwIiwKICAgICAgICAgICAgICAgIHJlZ2V4OiAiXFwvIiwKICAgICAgICAgICAgICAgIG5leHQ6ICJyZWdleCIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW4gOiAidGV4dCIsCiAgICAgICAgICAgICAgICByZWdleCA6ICJcXHMrfF4kIiwKICAgICAgICAgICAgICAgIG5leHQgOiAic3RhcnQiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuOiAiZW1wdHkiLAogICAgICAgICAgICAgICAgcmVnZXg6ICIiLAogICAgICAgICAgICAgICAgbmV4dDogIm5vX3JlZ2V4IgogICAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICAicmVnZXgiOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRva2VuOiAicmVnZXhwLmtleXdvcmQub3BlcmF0b3IiLAogICAgICAgICAgICAgICAgcmVnZXg6ICJcXFxcKD86dVtcXGRhLWZBLUZdezR9fHhbXFxkYS1mQS1GXXsyfXwuKSIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW46ICJzdHJpbmcucmVnZXhwIiwKICAgICAgICAgICAgICAgIHJlZ2V4OiAiL1tzeG5naW15XSoiLAogICAgICAgICAgICAgICAgbmV4dDogIm5vX3JlZ2V4IgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJpbnZhbGlkIiwKICAgICAgICAgICAgICAgIHJlZ2V4OiAvXHtcZCtcYiw/XGQqXH1bKypdfFsrKiReP11bKypdfFskXl1bP118XD97Myx9LwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJjb25zdGFudC5sYW5ndWFnZS5lc2NhcGUiLAogICAgICAgICAgICAgICAgcmVnZXg6IC9cKFw/Wzo9IV18XCl8XHtcZCtcYiw/XGQqXH18WysqXVw/fFsoKSReKyo/Ll0vCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuIDogImNvbnN0YW50Lmxhbmd1YWdlLmRlbGltaXRlciIsCiAgICAgICAgICAgICAgICByZWdleDogL1x8LwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbjogImNvbnN0YW50Lmxhbmd1YWdlLmVzY2FwZSIsCiAgICAgICAgICAgICAgICByZWdleDogL1xbXF4/LywKICAgICAgICAgICAgICAgIG5leHQ6ICJyZWdleF9jaGFyYWN0ZXJfY2xhc3MiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuOiAiZW1wdHkiLAogICAgICAgICAgICAgICAgcmVnZXg6ICIkIiwKICAgICAgICAgICAgICAgIG5leHQ6ICJub19yZWdleCIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgZGVmYXVsdFRva2VuOiAic3RyaW5nLnJlZ2V4cCIKICAgICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgInJlZ2V4X2NoYXJhY3Rlcl9jbGFzcyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9rZW46ICJyZWdleHAuY2hhcmNsYXNzLmtleXdvcmQub3BlcmF0b3IiLAogICAgICAgICAgICAgICAgcmVnZXg6ICJcXFxcKD86dVtcXGRhLWZBLUZdezR9fHhbXFxkYS1mQS1GXXsyfXwuKSIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW46ICJjb25zdGFudC5sYW5ndWFnZS5lc2NhcGUiLAogICAgICAgICAgICAgICAgcmVnZXg6ICJdIiwKICAgICAgICAgICAgICAgIG5leHQ6ICJyZWdleCIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW46ICJjb25zdGFudC5sYW5ndWFnZS5lc2NhcGUiLAogICAgICAgICAgICAgICAgcmVnZXg6ICItIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbjogImVtcHR5IiwKICAgICAgICAgICAgICAgIHJlZ2V4OiAiJCIsCiAgICAgICAgICAgICAgICBuZXh0OiAibm9fcmVnZXgiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGRlZmF1bHRUb2tlbjogInN0cmluZy5yZWdleHAuY2hhcmFjaHRlcmNsYXNzIgogICAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICAiZnVuY3Rpb25fYXJndW1lbnRzIjogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0b2tlbjogInZhcmlhYmxlLnBhcmFtZXRlciIsCiAgICAgICAgICAgICAgICByZWdleDogaWRlbnRpZmllclJlCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuOiAicHVuY3R1YXRpb24ub3BlcmF0b3IiLAogICAgICAgICAgICAgICAgcmVnZXg6ICJbLCBdKyIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW46ICJwdW5jdHVhdGlvbi5vcGVyYXRvciIsCiAgICAgICAgICAgICAgICByZWdleDogIiQiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuOiAiZW1wdHkiLAogICAgICAgICAgICAgICAgcmVnZXg6ICIiLAogICAgICAgICAgICAgICAgbmV4dDogIm5vX3JlZ2V4IgogICAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICAicXFzdHJpbmciIDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJjb25zdGFudC5sYW5ndWFnZS5lc2NhcGUiLAogICAgICAgICAgICAgICAgcmVnZXggOiBlc2NhcGVkUmUKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW4gOiAic3RyaW5nIiwKICAgICAgICAgICAgICAgIHJlZ2V4IDogIlxcXFwkIiwKICAgICAgICAgICAgICAgIG5leHQgIDogInFxc3RyaW5nIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJzdHJpbmciLAogICAgICAgICAgICAgICAgcmVnZXggOiAnInwkJywKICAgICAgICAgICAgICAgIG5leHQgIDogIm5vX3JlZ2V4IgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0VG9rZW46ICJzdHJpbmciCiAgICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgICJxc3RyaW5nIiA6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9rZW4gOiAiY29uc3RhbnQubGFuZ3VhZ2UuZXNjYXBlIiwKICAgICAgICAgICAgICAgIHJlZ2V4IDogZXNjYXBlZFJlCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuIDogInN0cmluZyIsCiAgICAgICAgICAgICAgICByZWdleCA6ICJcXFxcJCIsCiAgICAgICAgICAgICAgICBuZXh0ICA6ICJxc3RyaW5nIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJzdHJpbmciLAogICAgICAgICAgICAgICAgcmVnZXggOiAiJ3wkIiwKICAgICAgICAgICAgICAgIG5leHQgIDogIm5vX3JlZ2V4IgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0VG9rZW46ICJzdHJpbmciCiAgICAgICAgICAgIH0KICAgICAgICBdCiAgICB9OwogICAgCiAgICAKICAgIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5ub0VTNikgewogICAgICAgIHRoaXMuJHJ1bGVzLm5vX3JlZ2V4LnVuc2hpZnQoewogICAgICAgICAgICByZWdleDogIlt7fV0iLCBvbk1hdGNoOiBmdW5jdGlvbih2YWwsIHN0YXRlLCBzdGFjaykgewogICAgICAgICAgICAgICAgdGhpcy5uZXh0ID0gdmFsID09ICJ7IiA/IHRoaXMubmV4dFN0YXRlIDogIiI7CiAgICAgICAgICAgICAgICBpZiAodmFsID09ICJ7IiAmJiBzdGFjay5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBzdGFjay51bnNoaWZ0KCJzdGFydCIsIHN0YXRlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbCA9PSAifSIgJiYgc3RhY2subGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgc3RhY2suc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHQgPSBzdGFjay5zaGlmdCgpOwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5leHQuaW5kZXhPZigic3RyaW5nIikgIT0gLTEgfHwgdGhpcy5uZXh0LmluZGV4T2YoImpzeCIpICE9IC0xKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInBhcmVuLnF1YXNpLmVuZCI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdmFsID09ICJ7IiA/ICJwYXJlbi5scGFyZW4iIDogInBhcmVuLnJwYXJlbiI7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG5leHRTdGF0ZTogInN0YXJ0IgogICAgICAgIH0sIHsKICAgICAgICAgICAgdG9rZW4gOiAic3RyaW5nLnF1YXNpLnN0YXJ0IiwKICAgICAgICAgICAgcmVnZXggOiAvYC8sCiAgICAgICAgICAgIHB1c2ggIDogW3sKICAgICAgICAgICAgICAgIHRva2VuIDogImNvbnN0YW50Lmxhbmd1YWdlLmVzY2FwZSIsCiAgICAgICAgICAgICAgICByZWdleCA6IGVzY2FwZWRSZQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJwYXJlbi5xdWFzaS5zdGFydCIsCiAgICAgICAgICAgICAgICByZWdleCA6IC9cJHsvLAogICAgICAgICAgICAgICAgcHVzaCAgOiAic3RhcnQiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuIDogInN0cmluZy5xdWFzaS5lbmQiLAogICAgICAgICAgICAgICAgcmVnZXggOiAvYC8sCiAgICAgICAgICAgICAgICBuZXh0ICA6ICJwb3AiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGRlZmF1bHRUb2tlbjogInN0cmluZy5xdWFzaSIKICAgICAgICAgICAgfV0KICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMubm9KU1gpCiAgICAgICAgICAgIEpTWC5jYWxsKHRoaXMpOwogICAgfQogICAgCiAgICB0aGlzLmVtYmVkUnVsZXMoRG9jQ29tbWVudEhpZ2hsaWdodFJ1bGVzLCAiZG9jLSIsCiAgICAgICAgWyBEb2NDb21tZW50SGlnaGxpZ2h0UnVsZXMuZ2V0RW5kUnVsZSgibm9fcmVnZXgiKSBdKTsKICAgIAogICAgdGhpcy5ub3JtYWxpemVSdWxlcygpOwp9OwoKb29wLmluaGVyaXRzKEphdmFTY3JpcHRIaWdobGlnaHRSdWxlcywgVGV4dEhpZ2hsaWdodFJ1bGVzKTsKCmZ1bmN0aW9uIEpTWCgpIHsKICAgIHZhciB0YWdSZWdleCA9IGlkZW50aWZpZXJSZS5yZXBsYWNlKCJcXGQiLCAiXFxkXFwtIik7CiAgICB2YXIganN4VGFnID0gewogICAgICAgIG9uTWF0Y2ggOiBmdW5jdGlvbih2YWwsIHN0YXRlLCBzdGFjaykgewogICAgICAgICAgICB2YXIgb2Zmc2V0ID0gdmFsLmNoYXJBdCgxKSA9PSAiLyIgPyAyIDogMTsKICAgICAgICAgICAgaWYgKG9mZnNldCA9PSAxKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgIT0gdGhpcy5uZXh0U3RhdGUpCiAgICAgICAgICAgICAgICAgICAgc3RhY2sudW5zaGlmdCh0aGlzLm5leHQsIHRoaXMubmV4dFN0YXRlLCAwKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBzdGFjay51bnNoaWZ0KHRoaXMubmV4dCk7CiAgICAgICAgICAgICAgICBzdGFja1syXSsrOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9mZnNldCA9PSAyKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT0gdGhpcy5uZXh0U3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICBzdGFja1sxXS0tOwogICAgICAgICAgICAgICAgICAgIGlmICghc3RhY2tbMV0gfHwgc3RhY2tbMV0gPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgICAgdHlwZTogIm1ldGEudGFnLnB1bmN0dWF0aW9uLiIgKyAob2Zmc2V0ID09IDEgPyAiIiA6ICJlbmQtIikgKyAidGFnLW9wZW4ueG1sIiwKICAgICAgICAgICAgICAgIHZhbHVlOiB2YWwuc2xpY2UoMCwgb2Zmc2V0KQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0eXBlOiAibWV0YS50YWcudGFnLW5hbWUueG1sIiwKICAgICAgICAgICAgICAgIHZhbHVlOiB2YWwuc3Vic3RyKG9mZnNldCkKICAgICAgICAgICAgfV07CiAgICAgICAgfSwKICAgICAgICByZWdleCA6ICI8Lz8iICsgdGFnUmVnZXggKyAiIiwKICAgICAgICBuZXh0OiAianN4QXR0cmlidXRlcyIsCiAgICAgICAgbmV4dFN0YXRlOiAianN4IgogICAgfTsKICAgIHRoaXMuJHJ1bGVzLnN0YXJ0LnVuc2hpZnQoanN4VGFnKTsKICAgIHZhciBqc3hKc1J1bGUgPSB7CiAgICAgICAgcmVnZXg6ICJ7IiwKICAgICAgICB0b2tlbjogInBhcmVuLnF1YXNpLnN0YXJ0IiwKICAgICAgICBwdXNoOiAic3RhcnQiCiAgICB9OwogICAgdGhpcy4kcnVsZXMuanN4ID0gWwogICAgICAgIGpzeEpzUnVsZSwKICAgICAgICBqc3hUYWcsCiAgICAgICAge2luY2x1ZGUgOiAicmVmZXJlbmNlIn0sCiAgICAgICAge2RlZmF1bHRUb2tlbjogInN0cmluZyJ9CiAgICBdOwogICAgdGhpcy4kcnVsZXMuanN4QXR0cmlidXRlcyA9IFt7CiAgICAgICAgdG9rZW4gOiAibWV0YS50YWcucHVuY3R1YXRpb24udGFnLWNsb3NlLnhtbCIsIAogICAgICAgIHJlZ2V4IDogIi8/PiIsIAogICAgICAgIG9uTWF0Y2ggOiBmdW5jdGlvbih2YWx1ZSwgY3VycmVudFN0YXRlLCBzdGFjaykgewogICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09IHN0YWNrWzBdKQogICAgICAgICAgICAgICAgc3RhY2suc2hpZnQoKTsKICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PSAyKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RhY2tbMF0gPT0gdGhpcy5uZXh0U3RhdGUpCiAgICAgICAgICAgICAgICAgICAgc3RhY2tbMV0tLTsKICAgICAgICAgICAgICAgIGlmICghc3RhY2tbMV0gfHwgc3RhY2tbMV0gPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgc3RhY2suc3BsaWNlKDAsIDIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMubmV4dCA9IHN0YWNrWzBdIHx8ICJzdGFydCI7CiAgICAgICAgICAgIHJldHVybiBbe3R5cGU6IHRoaXMudG9rZW4sIHZhbHVlOiB2YWx1ZX1dOwogICAgICAgIH0sCiAgICAgICAgbmV4dFN0YXRlOiAianN4IgogICAgfSwgCiAgICBqc3hKc1J1bGUsCiAgICBjb21tZW50cygianN4QXR0cmlidXRlcyIpLAogICAgewogICAgICAgIHRva2VuIDogImVudGl0eS5vdGhlci5hdHRyaWJ1dGUtbmFtZS54bWwiLAogICAgICAgIHJlZ2V4IDogdGFnUmVnZXgKICAgIH0sIHsKICAgICAgICB0b2tlbiA6ICJrZXl3b3JkLm9wZXJhdG9yLmF0dHJpYnV0ZS1lcXVhbHMueG1sIiwKICAgICAgICByZWdleCA6ICI9IgogICAgfSwgewogICAgICAgIHRva2VuIDogInRleHQudGFnLXdoaXRlc3BhY2UueG1sIiwKICAgICAgICByZWdleCA6ICJcXHMrIgogICAgfSwgewogICAgICAgIHRva2VuIDogInN0cmluZy5hdHRyaWJ1dGUtdmFsdWUueG1sIiwKICAgICAgICByZWdleCA6ICInIiwKICAgICAgICBzdGF0ZU5hbWUgOiAianN4X2F0dHJfcSIsCiAgICAgICAgcHVzaCA6IFsKICAgICAgICAgICAge3Rva2VuIDogInN0cmluZy5hdHRyaWJ1dGUtdmFsdWUueG1sIiwgcmVnZXg6ICInIiwgbmV4dDogInBvcCJ9LAogICAgICAgICAgICB7aW5jbHVkZSA6ICJyZWZlcmVuY2UifSwKICAgICAgICAgICAge2RlZmF1bHRUb2tlbiA6ICJzdHJpbmcuYXR0cmlidXRlLXZhbHVlLnhtbCJ9CiAgICAgICAgXQogICAgfSwgewogICAgICAgIHRva2VuIDogInN0cmluZy5hdHRyaWJ1dGUtdmFsdWUueG1sIiwKICAgICAgICByZWdleCA6ICciJywKICAgICAgICBzdGF0ZU5hbWUgOiAianN4X2F0dHJfcXEiLAogICAgICAgIHB1c2ggOiBbCiAgICAgICAgICAgIHt0b2tlbiA6ICJzdHJpbmcuYXR0cmlidXRlLXZhbHVlLnhtbCIsIHJlZ2V4OiAnIicsIG5leHQ6ICJwb3AifSwKICAgICAgICAgICAge2luY2x1ZGUgOiAicmVmZXJlbmNlIn0sCiAgICAgICAgICAgIHtkZWZhdWx0VG9rZW4gOiAic3RyaW5nLmF0dHJpYnV0ZS12YWx1ZS54bWwifQogICAgICAgIF0KICAgIH0sCiAgICBqc3hUYWcKICAgIF07CiAgICB0aGlzLiRydWxlcy5yZWZlcmVuY2UgPSBbewogICAgICAgIHRva2VuIDogImNvbnN0YW50Lmxhbmd1YWdlLmVzY2FwZS5yZWZlcmVuY2UueG1sIiwKICAgICAgICByZWdleCA6ICIoPzomI1swLTldKzspfCg/OiYjeFswLTlhLWZBLUZdKzspfCg/OiZbYS16QS1aMC05XzpcXC4tXSs7KSIKICAgIH1dOwp9CgpmdW5jdGlvbiBjb21tZW50cyhuZXh0KSB7CiAgICByZXR1cm4gWwogICAgICAgIHsKICAgICAgICAgICAgdG9rZW4gOiAiY29tbWVudCIsIC8vIG11bHRpIGxpbmUgY29tbWVudAogICAgICAgICAgICByZWdleCA6IC9cL1wqLywKICAgICAgICAgICAgbmV4dDogWwogICAgICAgICAgICAgICAgRG9jQ29tbWVudEhpZ2hsaWdodFJ1bGVzLmdldFRhZ1J1bGUoKSwKICAgICAgICAgICAgICAgIHt0b2tlbiA6ICJjb21tZW50IiwgcmVnZXggOiAiXFwqXFwvIiwgbmV4dCA6IG5leHQgfHwgInBvcCJ9LAogICAgICAgICAgICAgICAge2RlZmF1bHRUb2tlbiA6ICJjb21tZW50IiwgY2FzZUluc2Vuc2l0aXZlOiB0cnVlfQogICAgICAgICAgICBdCiAgICAgICAgfSwgewogICAgICAgICAgICB0b2tlbiA6ICJjb21tZW50IiwKICAgICAgICAgICAgcmVnZXggOiAiXFwvXFwvIiwKICAgICAgICAgICAgbmV4dDogWwogICAgICAgICAgICAgICAgRG9jQ29tbWVudEhpZ2hsaWdodFJ1bGVzLmdldFRhZ1J1bGUoKSwKICAgICAgICAgICAgICAgIHt0b2tlbiA6ICJjb21tZW50IiwgcmVnZXggOiAiJHxeIiwgbmV4dCA6IG5leHQgfHwgInBvcCJ9LAogICAgICAgICAgICAgICAge2RlZmF1bHRUb2tlbiA6ICJjb21tZW50IiwgY2FzZUluc2Vuc2l0aXZlOiB0cnVlfQogICAgICAgICAgICBdCiAgICAgICAgfQogICAgXTsKfQpleHBvcnRzLkphdmFTY3JpcHRIaWdobGlnaHRSdWxlcyA9IEphdmFTY3JpcHRIaWdobGlnaHRSdWxlczsKfSk7CgphY2UuZGVmaW5lKCJhY2UvbW9kZS9tYXRjaGluZ19icmFjZV9vdXRkZW50IixbInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIiwiYWNlL3JhbmdlIl0sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewoidXNlIHN0cmljdCI7Cgp2YXIgUmFuZ2UgPSByZXF1aXJlKCIuLi9yYW5nZSIpLlJhbmdlOwoKdmFyIE1hdGNoaW5nQnJhY2VPdXRkZW50ID0gZnVuY3Rpb24oKSB7fTsKCihmdW5jdGlvbigpIHsKCiAgICB0aGlzLmNoZWNrT3V0ZGVudCA9IGZ1bmN0aW9uKGxpbmUsIGlucHV0KSB7CiAgICAgICAgaWYgKCEgL15ccyskLy50ZXN0KGxpbmUpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIHJldHVybiAvXlxzKlx9Ly50ZXN0KGlucHV0KTsKICAgIH07CgogICAgdGhpcy5hdXRvT3V0ZGVudCA9IGZ1bmN0aW9uKGRvYywgcm93KSB7CiAgICAgICAgdmFyIGxpbmUgPSBkb2MuZ2V0TGluZShyb3cpOwogICAgICAgIHZhciBtYXRjaCA9IGxpbmUubWF0Y2goL14oXHMqXH0pLyk7CgogICAgICAgIGlmICghbWF0Y2gpIHJldHVybiAwOwoKICAgICAgICB2YXIgY29sdW1uID0gbWF0Y2hbMV0ubGVuZ3RoOwogICAgICAgIHZhciBvcGVuQnJhY2VQb3MgPSBkb2MuZmluZE1hdGNoaW5nQnJhY2tldCh7cm93OiByb3csIGNvbHVtbjogY29sdW1ufSk7CgogICAgICAgIGlmICghb3BlbkJyYWNlUG9zIHx8IG9wZW5CcmFjZVBvcy5yb3cgPT0gcm93KSByZXR1cm4gMDsKCiAgICAgICAgdmFyIGluZGVudCA9IHRoaXMuJGdldEluZGVudChkb2MuZ2V0TGluZShvcGVuQnJhY2VQb3Mucm93KSk7CiAgICAgICAgZG9jLnJlcGxhY2UobmV3IFJhbmdlKHJvdywgMCwgcm93LCBjb2x1bW4tMSksIGluZGVudCk7CiAgICB9OwoKICAgIHRoaXMuJGdldEluZGVudCA9IGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICByZXR1cm4gbGluZS5tYXRjaCgvXlxzKi8pWzBdOwogICAgfTsKCn0pLmNhbGwoTWF0Y2hpbmdCcmFjZU91dGRlbnQucHJvdG90eXBlKTsKCmV4cG9ydHMuTWF0Y2hpbmdCcmFjZU91dGRlbnQgPSBNYXRjaGluZ0JyYWNlT3V0ZGVudDsKfSk7CgphY2UuZGVmaW5lKCJhY2UvbW9kZS9iZWhhdmlvdXIvY3N0eWxlIixbInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIiwiYWNlL2xpYi9vb3AiLCJhY2UvbW9kZS9iZWhhdmlvdXIiLCJhY2UvdG9rZW5faXRlcmF0b3IiLCJhY2UvbGliL2xhbmciXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7CiJ1c2Ugc3RyaWN0IjsKCnZhciBvb3AgPSByZXF1aXJlKCIuLi8uLi9saWIvb29wIik7CnZhciBCZWhhdmlvdXIgPSByZXF1aXJlKCIuLi9iZWhhdmlvdXIiKS5CZWhhdmlvdXI7CnZhciBUb2tlbkl0ZXJhdG9yID0gcmVxdWlyZSgiLi4vLi4vdG9rZW5faXRlcmF0b3IiKS5Ub2tlbkl0ZXJhdG9yOwp2YXIgbGFuZyA9IHJlcXVpcmUoIi4uLy4uL2xpYi9sYW5nIik7Cgp2YXIgU0FGRV9JTlNFUlRfSU5fVE9LRU5TID0KICAgIFsidGV4dCIsICJwYXJlbi5ycGFyZW4iLCAicHVuY3R1YXRpb24ub3BlcmF0b3IiXTsKdmFyIFNBRkVfSU5TRVJUX0JFRk9SRV9UT0tFTlMgPQogICAgWyJ0ZXh0IiwgInBhcmVuLnJwYXJlbiIsICJwdW5jdHVhdGlvbi5vcGVyYXRvciIsICJjb21tZW50Il07Cgp2YXIgY29udGV4dDsKdmFyIGNvbnRleHRDYWNoZSA9IHt9Owp2YXIgaW5pdENvbnRleHQgPSBmdW5jdGlvbihlZGl0b3IpIHsKICAgIHZhciBpZCA9IC0xOwogICAgaWYgKGVkaXRvci5tdWx0aVNlbGVjdCkgewogICAgICAgIGlkID0gZWRpdG9yLnNlbGVjdGlvbi5pbmRleDsKICAgICAgICBpZiAoY29udGV4dENhY2hlLnJhbmdlQ291bnQgIT0gZWRpdG9yLm11bHRpU2VsZWN0LnJhbmdlQ291bnQpCiAgICAgICAgICAgIGNvbnRleHRDYWNoZSA9IHtyYW5nZUNvdW50OiBlZGl0b3IubXVsdGlTZWxlY3QucmFuZ2VDb3VudH07CiAgICB9CiAgICBpZiAoY29udGV4dENhY2hlW2lkXSkKICAgICAgICByZXR1cm4gY29udGV4dCA9IGNvbnRleHRDYWNoZVtpZF07CiAgICBjb250ZXh0ID0gY29udGV4dENhY2hlW2lkXSA9IHsKICAgICAgICBhdXRvSW5zZXJ0ZWRCcmFja2V0czogMCwKICAgICAgICBhdXRvSW5zZXJ0ZWRSb3c6IC0xLAogICAgICAgIGF1dG9JbnNlcnRlZExpbmVFbmQ6ICIiLAogICAgICAgIG1heWJlSW5zZXJ0ZWRCcmFja2V0czogMCwKICAgICAgICBtYXliZUluc2VydGVkUm93OiAtMSwKICAgICAgICBtYXliZUluc2VydGVkTGluZVN0YXJ0OiAiIiwKICAgICAgICBtYXliZUluc2VydGVkTGluZUVuZDogIiIKICAgIH07Cn07Cgp2YXIgZ2V0V3JhcHBlZCA9IGZ1bmN0aW9uKHNlbGVjdGlvbiwgc2VsZWN0ZWQsIG9wZW5pbmcsIGNsb3NpbmcpIHsKICAgIHZhciByb3dEaWZmID0gc2VsZWN0aW9uLmVuZC5yb3cgLSBzZWxlY3Rpb24uc3RhcnQucm93OwogICAgcmV0dXJuIHsKICAgICAgICB0ZXh0OiBvcGVuaW5nICsgc2VsZWN0ZWQgKyBjbG9zaW5nLAogICAgICAgIHNlbGVjdGlvbjogWwogICAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5zdGFydC5jb2x1bW4gKyAxLAogICAgICAgICAgICAgICAgcm93RGlmZiwKICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5lbmQuY29sdW1uICsgKHJvd0RpZmYgPyAwIDogMSkKICAgICAgICAgICAgXQogICAgfTsKfTsKCnZhciBDc3R5bGVCZWhhdmlvdXIgPSBmdW5jdGlvbigpIHsKICAgIHRoaXMuYWRkKCJicmFjZXMiLCAiaW5zZXJ0aW9uIiwgZnVuY3Rpb24oc3RhdGUsIGFjdGlvbiwgZWRpdG9yLCBzZXNzaW9uLCB0ZXh0KSB7CiAgICAgICAgdmFyIGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3JQb3NpdGlvbigpOwogICAgICAgIHZhciBsaW5lID0gc2Vzc2lvbi5kb2MuZ2V0TGluZShjdXJzb3Iucm93KTsKICAgICAgICBpZiAodGV4dCA9PSAneycpIHsKICAgICAgICAgICAgaW5pdENvbnRleHQoZWRpdG9yKTsKICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb25SYW5nZSgpOwogICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBzZXNzaW9uLmRvYy5nZXRUZXh0UmFuZ2Uoc2VsZWN0aW9uKTsKICAgICAgICAgICAgaWYgKHNlbGVjdGVkICE9PSAiIiAmJiBzZWxlY3RlZCAhPT0gInsiICYmIGVkaXRvci5nZXRXcmFwQmVoYXZpb3Vyc0VuYWJsZWQoKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGdldFdyYXBwZWQoc2VsZWN0aW9uLCBzZWxlY3RlZCwgJ3snLCAnfScpOwogICAgICAgICAgICB9IGVsc2UgaWYgKENzdHlsZUJlaGF2aW91ci5pc1NhbmVJbnNlcnRpb24oZWRpdG9yLCBzZXNzaW9uKSkgewogICAgICAgICAgICAgICAgaWYgKC9bXF1cfVwpXS8udGVzdChsaW5lW2N1cnNvci5jb2x1bW5dKSB8fCBlZGl0b3IuaW5NdWx0aVNlbGVjdE1vZGUpIHsKICAgICAgICAgICAgICAgICAgICBDc3R5bGVCZWhhdmlvdXIucmVjb3JkQXV0b0luc2VydChlZGl0b3IsIHNlc3Npb24sICJ9Iik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ3t9JywKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBbMSwgMV0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBDc3R5bGVCZWhhdmlvdXIucmVjb3JkTWF5YmVJbnNlcnQoZWRpdG9yLCBzZXNzaW9uLCAieyIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICd7JywKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBbMSwgMV0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0ZXh0ID09ICd9JykgewogICAgICAgICAgICBpbml0Q29udGV4dChlZGl0b3IpOwogICAgICAgICAgICB2YXIgcmlnaHRDaGFyID0gbGluZS5zdWJzdHJpbmcoY3Vyc29yLmNvbHVtbiwgY3Vyc29yLmNvbHVtbiArIDEpOwogICAgICAgICAgICBpZiAocmlnaHRDaGFyID09ICd9JykgewogICAgICAgICAgICAgICAgdmFyIG1hdGNoaW5nID0gc2Vzc2lvbi4kZmluZE9wZW5pbmdCcmFja2V0KCd9Jywge2NvbHVtbjogY3Vyc29yLmNvbHVtbiArIDEsIHJvdzogY3Vyc29yLnJvd30pOwogICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nICE9PSBudWxsICYmIENzdHlsZUJlaGF2aW91ci5pc0F1dG9JbnNlcnRlZENsb3NpbmcoY3Vyc29yLCBsaW5lLCB0ZXh0KSkgewogICAgICAgICAgICAgICAgICAgIENzdHlsZUJlaGF2aW91ci5wb3BBdXRvSW5zZXJ0ZWRDbG9zaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJycsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogWzEsIDFdCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGV4dCA9PSAiXG4iIHx8IHRleHQgPT0gIlxyXG4iKSB7CiAgICAgICAgICAgIGluaXRDb250ZXh0KGVkaXRvcik7CiAgICAgICAgICAgIHZhciBjbG9zaW5nID0gIiI7CiAgICAgICAgICAgIGlmIChDc3R5bGVCZWhhdmlvdXIuaXNNYXliZUluc2VydGVkQ2xvc2luZyhjdXJzb3IsIGxpbmUpKSB7CiAgICAgICAgICAgICAgICBjbG9zaW5nID0gbGFuZy5zdHJpbmdSZXBlYXQoIn0iLCBjb250ZXh0Lm1heWJlSW5zZXJ0ZWRCcmFja2V0cyk7CiAgICAgICAgICAgICAgICBDc3R5bGVCZWhhdmlvdXIuY2xlYXJNYXliZUluc2VydGVkQ2xvc2luZygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciByaWdodENoYXIgPSBsaW5lLnN1YnN0cmluZyhjdXJzb3IuY29sdW1uLCBjdXJzb3IuY29sdW1uICsgMSk7CiAgICAgICAgICAgIGlmIChyaWdodENoYXIgPT09ICd9JykgewogICAgICAgICAgICAgICAgdmFyIG9wZW5CcmFjZVBvcyA9IHNlc3Npb24uZmluZE1hdGNoaW5nQnJhY2tldCh7cm93OiBjdXJzb3Iucm93LCBjb2x1bW46IGN1cnNvci5jb2x1bW4rMX0sICd9Jyk7CiAgICAgICAgICAgICAgICBpZiAoIW9wZW5CcmFjZVBvcykKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB2YXIgbmV4dF9pbmRlbnQgPSB0aGlzLiRnZXRJbmRlbnQoc2Vzc2lvbi5nZXRMaW5lKG9wZW5CcmFjZVBvcy5yb3cpKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjbG9zaW5nKSB7CiAgICAgICAgICAgICAgICB2YXIgbmV4dF9pbmRlbnQgPSB0aGlzLiRnZXRJbmRlbnQobGluZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBDc3R5bGVCZWhhdmlvdXIuY2xlYXJNYXliZUluc2VydGVkQ2xvc2luZygpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBpbmRlbnQgPSBuZXh0X2luZGVudCArIHNlc3Npb24uZ2V0VGFiU3RyaW5nKCk7CgogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgdGV4dDogJ1xuJyArIGluZGVudCArICdcbicgKyBuZXh0X2luZGVudCArIGNsb3NpbmcsCiAgICAgICAgICAgICAgICBzZWxlY3Rpb246IFsxLCBpbmRlbnQubGVuZ3RoLCAxLCBpbmRlbnQubGVuZ3RoXQogICAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIENzdHlsZUJlaGF2aW91ci5jbGVhck1heWJlSW5zZXJ0ZWRDbG9zaW5nKCk7CiAgICAgICAgfQogICAgfSk7CgogICAgdGhpcy5hZGQoImJyYWNlcyIsICJkZWxldGlvbiIsIGZ1bmN0aW9uKHN0YXRlLCBhY3Rpb24sIGVkaXRvciwgc2Vzc2lvbiwgcmFuZ2UpIHsKICAgICAgICB2YXIgc2VsZWN0ZWQgPSBzZXNzaW9uLmRvYy5nZXRUZXh0UmFuZ2UocmFuZ2UpOwogICAgICAgIGlmICghcmFuZ2UuaXNNdWx0aUxpbmUoKSAmJiBzZWxlY3RlZCA9PSAneycpIHsKICAgICAgICAgICAgaW5pdENvbnRleHQoZWRpdG9yKTsKICAgICAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmRvYy5nZXRMaW5lKHJhbmdlLnN0YXJ0LnJvdyk7CiAgICAgICAgICAgIHZhciByaWdodENoYXIgPSBsaW5lLnN1YnN0cmluZyhyYW5nZS5lbmQuY29sdW1uLCByYW5nZS5lbmQuY29sdW1uICsgMSk7CiAgICAgICAgICAgIGlmIChyaWdodENoYXIgPT0gJ30nKSB7CiAgICAgICAgICAgICAgICByYW5nZS5lbmQuY29sdW1uKys7CiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb250ZXh0Lm1heWJlSW5zZXJ0ZWRCcmFja2V0cy0tOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CgogICAgdGhpcy5hZGQoInBhcmVucyIsICJpbnNlcnRpb24iLCBmdW5jdGlvbihzdGF0ZSwgYWN0aW9uLCBlZGl0b3IsIHNlc3Npb24sIHRleHQpIHsKICAgICAgICBpZiAodGV4dCA9PSAnKCcpIHsKICAgICAgICAgICAgaW5pdENvbnRleHQoZWRpdG9yKTsKICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb25SYW5nZSgpOwogICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBzZXNzaW9uLmRvYy5nZXRUZXh0UmFuZ2Uoc2VsZWN0aW9uKTsKICAgICAgICAgICAgaWYgKHNlbGVjdGVkICE9PSAiIiAmJiBlZGl0b3IuZ2V0V3JhcEJlaGF2aW91cnNFbmFibGVkKCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRXcmFwcGVkKHNlbGVjdGlvbiwgc2VsZWN0ZWQsICcoJywgJyknKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChDc3R5bGVCZWhhdmlvdXIuaXNTYW5lSW5zZXJ0aW9uKGVkaXRvciwgc2Vzc2lvbikpIHsKICAgICAgICAgICAgICAgIENzdHlsZUJlaGF2aW91ci5yZWNvcmRBdXRvSW5zZXJ0KGVkaXRvciwgc2Vzc2lvbiwgIikiKTsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogJygpJywKICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb246IFsxLCAxXQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGV4dCA9PSAnKScpIHsKICAgICAgICAgICAgaW5pdENvbnRleHQoZWRpdG9yKTsKICAgICAgICAgICAgdmFyIGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3JQb3NpdGlvbigpOwogICAgICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZG9jLmdldExpbmUoY3Vyc29yLnJvdyk7CiAgICAgICAgICAgIHZhciByaWdodENoYXIgPSBsaW5lLnN1YnN0cmluZyhjdXJzb3IuY29sdW1uLCBjdXJzb3IuY29sdW1uICsgMSk7CiAgICAgICAgICAgIGlmIChyaWdodENoYXIgPT0gJyknKSB7CiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hpbmcgPSBzZXNzaW9uLiRmaW5kT3BlbmluZ0JyYWNrZXQoJyknLCB7Y29sdW1uOiBjdXJzb3IuY29sdW1uICsgMSwgcm93OiBjdXJzb3Iucm93fSk7CiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmcgIT09IG51bGwgJiYgQ3N0eWxlQmVoYXZpb3VyLmlzQXV0b0luc2VydGVkQ2xvc2luZyhjdXJzb3IsIGxpbmUsIHRleHQpKSB7CiAgICAgICAgICAgICAgICAgICAgQ3N0eWxlQmVoYXZpb3VyLnBvcEF1dG9JbnNlcnRlZENsb3NpbmcoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBbMSwgMV0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CgogICAgdGhpcy5hZGQoInBhcmVucyIsICJkZWxldGlvbiIsIGZ1bmN0aW9uKHN0YXRlLCBhY3Rpb24sIGVkaXRvciwgc2Vzc2lvbiwgcmFuZ2UpIHsKICAgICAgICB2YXIgc2VsZWN0ZWQgPSBzZXNzaW9uLmRvYy5nZXRUZXh0UmFuZ2UocmFuZ2UpOwogICAgICAgIGlmICghcmFuZ2UuaXNNdWx0aUxpbmUoKSAmJiBzZWxlY3RlZCA9PSAnKCcpIHsKICAgICAgICAgICAgaW5pdENvbnRleHQoZWRpdG9yKTsKICAgICAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmRvYy5nZXRMaW5lKHJhbmdlLnN0YXJ0LnJvdyk7CiAgICAgICAgICAgIHZhciByaWdodENoYXIgPSBsaW5lLnN1YnN0cmluZyhyYW5nZS5zdGFydC5jb2x1bW4gKyAxLCByYW5nZS5zdGFydC5jb2x1bW4gKyAyKTsKICAgICAgICAgICAgaWYgKHJpZ2h0Q2hhciA9PSAnKScpIHsKICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4rKzsKICAgICAgICAgICAgICAgIHJldHVybiByYW5nZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIHRoaXMuYWRkKCJicmFja2V0cyIsICJpbnNlcnRpb24iLCBmdW5jdGlvbihzdGF0ZSwgYWN0aW9uLCBlZGl0b3IsIHNlc3Npb24sIHRleHQpIHsKICAgICAgICBpZiAodGV4dCA9PSAnWycpIHsKICAgICAgICAgICAgaW5pdENvbnRleHQoZWRpdG9yKTsKICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb25SYW5nZSgpOwogICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBzZXNzaW9uLmRvYy5nZXRUZXh0UmFuZ2Uoc2VsZWN0aW9uKTsKICAgICAgICAgICAgaWYgKHNlbGVjdGVkICE9PSAiIiAmJiBlZGl0b3IuZ2V0V3JhcEJlaGF2aW91cnNFbmFibGVkKCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRXcmFwcGVkKHNlbGVjdGlvbiwgc2VsZWN0ZWQsICdbJywgJ10nKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChDc3R5bGVCZWhhdmlvdXIuaXNTYW5lSW5zZXJ0aW9uKGVkaXRvciwgc2Vzc2lvbikpIHsKICAgICAgICAgICAgICAgIENzdHlsZUJlaGF2aW91ci5yZWNvcmRBdXRvSW5zZXJ0KGVkaXRvciwgc2Vzc2lvbiwgIl0iKTsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1tdJywKICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb246IFsxLCAxXQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGV4dCA9PSAnXScpIHsKICAgICAgICAgICAgaW5pdENvbnRleHQoZWRpdG9yKTsKICAgICAgICAgICAgdmFyIGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3JQb3NpdGlvbigpOwogICAgICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZG9jLmdldExpbmUoY3Vyc29yLnJvdyk7CiAgICAgICAgICAgIHZhciByaWdodENoYXIgPSBsaW5lLnN1YnN0cmluZyhjdXJzb3IuY29sdW1uLCBjdXJzb3IuY29sdW1uICsgMSk7CiAgICAgICAgICAgIGlmIChyaWdodENoYXIgPT0gJ10nKSB7CiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hpbmcgPSBzZXNzaW9uLiRmaW5kT3BlbmluZ0JyYWNrZXQoJ10nLCB7Y29sdW1uOiBjdXJzb3IuY29sdW1uICsgMSwgcm93OiBjdXJzb3Iucm93fSk7CiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmcgIT09IG51bGwgJiYgQ3N0eWxlQmVoYXZpb3VyLmlzQXV0b0luc2VydGVkQ2xvc2luZyhjdXJzb3IsIGxpbmUsIHRleHQpKSB7CiAgICAgICAgICAgICAgICAgICAgQ3N0eWxlQmVoYXZpb3VyLnBvcEF1dG9JbnNlcnRlZENsb3NpbmcoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBbMSwgMV0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CgogICAgdGhpcy5hZGQoImJyYWNrZXRzIiwgImRlbGV0aW9uIiwgZnVuY3Rpb24oc3RhdGUsIGFjdGlvbiwgZWRpdG9yLCBzZXNzaW9uLCByYW5nZSkgewogICAgICAgIHZhciBzZWxlY3RlZCA9IHNlc3Npb24uZG9jLmdldFRleHRSYW5nZShyYW5nZSk7CiAgICAgICAgaWYgKCFyYW5nZS5pc011bHRpTGluZSgpICYmIHNlbGVjdGVkID09ICdbJykgewogICAgICAgICAgICBpbml0Q29udGV4dChlZGl0b3IpOwogICAgICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZG9jLmdldExpbmUocmFuZ2Uuc3RhcnQucm93KTsKICAgICAgICAgICAgdmFyIHJpZ2h0Q2hhciA9IGxpbmUuc3Vic3RyaW5nKHJhbmdlLnN0YXJ0LmNvbHVtbiArIDEsIHJhbmdlLnN0YXJ0LmNvbHVtbiArIDIpOwogICAgICAgICAgICBpZiAocmlnaHRDaGFyID09ICddJykgewogICAgICAgICAgICAgICAgcmFuZ2UuZW5kLmNvbHVtbisrOwogICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CgogICAgdGhpcy5hZGQoInN0cmluZ19kcXVvdGVzIiwgImluc2VydGlvbiIsIGZ1bmN0aW9uKHN0YXRlLCBhY3Rpb24sIGVkaXRvciwgc2Vzc2lvbiwgdGV4dCkgewogICAgICAgIGlmICh0ZXh0ID09ICciJyB8fCB0ZXh0ID09ICInIikgewogICAgICAgICAgICBpbml0Q29udGV4dChlZGl0b3IpOwogICAgICAgICAgICB2YXIgcXVvdGUgPSB0ZXh0OwogICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvblJhbmdlKCk7CiAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IHNlc3Npb24uZG9jLmdldFRleHRSYW5nZShzZWxlY3Rpb24pOwogICAgICAgICAgICBpZiAoc2VsZWN0ZWQgIT09ICIiICYmIHNlbGVjdGVkICE9PSAiJyIgJiYgc2VsZWN0ZWQgIT0gJyInICYmIGVkaXRvci5nZXRXcmFwQmVoYXZpb3Vyc0VuYWJsZWQoKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGdldFdyYXBwZWQoc2VsZWN0aW9uLCBzZWxlY3RlZCwgcXVvdGUsIHF1b3RlKTsKICAgICAgICAgICAgfSBlbHNlIGlmICghc2VsZWN0ZWQpIHsKICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yUG9zaXRpb24oKTsKICAgICAgICAgICAgICAgIHZhciBsaW5lID0gc2Vzc2lvbi5kb2MuZ2V0TGluZShjdXJzb3Iucm93KTsKICAgICAgICAgICAgICAgIHZhciBsZWZ0Q2hhciA9IGxpbmUuc3Vic3RyaW5nKGN1cnNvci5jb2x1bW4tMSwgY3Vyc29yLmNvbHVtbik7CiAgICAgICAgICAgICAgICB2YXIgcmlnaHRDaGFyID0gbGluZS5zdWJzdHJpbmcoY3Vyc29yLmNvbHVtbiwgY3Vyc29yLmNvbHVtbiArIDEpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBzZXNzaW9uLmdldFRva2VuQXQoY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbik7CiAgICAgICAgICAgICAgICB2YXIgcmlnaHRUb2tlbiA9IHNlc3Npb24uZ2V0VG9rZW5BdChjdXJzb3Iucm93LCBjdXJzb3IuY29sdW1uICsgMSk7CiAgICAgICAgICAgICAgICBpZiAobGVmdENoYXIgPT0gIlxcIiAmJiB0b2tlbiAmJiAvZXNjYXBlLy50ZXN0KHRva2VuLnR5cGUpKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgc3RyaW5nQmVmb3JlID0gdG9rZW4gJiYgL3N0cmluZ3xlc2NhcGUvLnRlc3QodG9rZW4udHlwZSk7CiAgICAgICAgICAgICAgICB2YXIgc3RyaW5nQWZ0ZXIgPSAhcmlnaHRUb2tlbiB8fCAvc3RyaW5nfGVzY2FwZS8udGVzdChyaWdodFRva2VuLnR5cGUpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcGFpcjsKICAgICAgICAgICAgICAgIGlmIChyaWdodENoYXIgPT0gcXVvdGUpIHsKICAgICAgICAgICAgICAgICAgICBwYWlyID0gc3RyaW5nQmVmb3JlICE9PSBzdHJpbmdBZnRlcjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZ0JlZm9yZSAmJiAhc3RyaW5nQWZ0ZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyB3cmFwIHN0cmluZyB3aXRoIGRpZmZlcmVudCBxdW90ZQogICAgICAgICAgICAgICAgICAgIGlmIChzdHJpbmdCZWZvcmUgJiYgc3RyaW5nQWZ0ZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBkbyBub3QgcGFpciBxdW90ZXMgaW5zaWRlIHN0cmluZ3MKICAgICAgICAgICAgICAgICAgICB2YXIgd29yZFJlID0gc2Vzc2lvbi4kbW9kZS50b2tlblJlOwogICAgICAgICAgICAgICAgICAgIHdvcmRSZS5sYXN0SW5kZXggPSAwOwogICAgICAgICAgICAgICAgICAgIHZhciBpc1dvcmRCZWZvcmUgPSB3b3JkUmUudGVzdChsZWZ0Q2hhcik7CiAgICAgICAgICAgICAgICAgICAgd29yZFJlLmxhc3RJbmRleCA9IDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIGlzV29yZEFmdGVyID0gd29yZFJlLnRlc3QobGVmdENoYXIpOwogICAgICAgICAgICAgICAgICAgIGlmIChpc1dvcmRCZWZvcmUgfHwgaXNXb3JkQWZ0ZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBiZWZvcmUgb3IgYWZ0ZXIgYWxwaGFudW1lcmljCiAgICAgICAgICAgICAgICAgICAgaWYgKHJpZ2h0Q2hhciAmJiAhL1tcczssLn0pXF1cXF0vLnRlc3QocmlnaHRDaGFyKSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIHRoZXJlIGlzIHJpZ2h0Q2hhciBhbmQgaXQgaXNuJ3QgY2xvc2luZwogICAgICAgICAgICAgICAgICAgIHBhaXIgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwYWlyID8gcXVvdGUgKyBxdW90ZSA6ICIiLAogICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogWzEsMV0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKCiAgICB0aGlzLmFkZCgic3RyaW5nX2RxdW90ZXMiLCAiZGVsZXRpb24iLCBmdW5jdGlvbihzdGF0ZSwgYWN0aW9uLCBlZGl0b3IsIHNlc3Npb24sIHJhbmdlKSB7CiAgICAgICAgdmFyIHNlbGVjdGVkID0gc2Vzc2lvbi5kb2MuZ2V0VGV4dFJhbmdlKHJhbmdlKTsKICAgICAgICBpZiAoIXJhbmdlLmlzTXVsdGlMaW5lKCkgJiYgKHNlbGVjdGVkID09ICciJyB8fCBzZWxlY3RlZCA9PSAiJyIpKSB7CiAgICAgICAgICAgIGluaXRDb250ZXh0KGVkaXRvcik7CiAgICAgICAgICAgIHZhciBsaW5lID0gc2Vzc2lvbi5kb2MuZ2V0TGluZShyYW5nZS5zdGFydC5yb3cpOwogICAgICAgICAgICB2YXIgcmlnaHRDaGFyID0gbGluZS5zdWJzdHJpbmcocmFuZ2Uuc3RhcnQuY29sdW1uICsgMSwgcmFuZ2Uuc3RhcnQuY29sdW1uICsgMik7CiAgICAgICAgICAgIGlmIChyaWdodENoYXIgPT0gc2VsZWN0ZWQpIHsKICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4rKzsKICAgICAgICAgICAgICAgIHJldHVybiByYW5nZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKfTsKCiAgICAKQ3N0eWxlQmVoYXZpb3VyLmlzU2FuZUluc2VydGlvbiA9IGZ1bmN0aW9uKGVkaXRvciwgc2Vzc2lvbikgewogICAgdmFyIGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3JQb3NpdGlvbigpOwogICAgdmFyIGl0ZXJhdG9yID0gbmV3IFRva2VuSXRlcmF0b3Ioc2Vzc2lvbiwgY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbik7CiAgICBpZiAoIXRoaXMuJG1hdGNoVG9rZW5UeXBlKGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbigpIHx8ICJ0ZXh0IiwgU0FGRV9JTlNFUlRfSU5fVE9LRU5TKSkgewogICAgICAgIHZhciBpdGVyYXRvcjIgPSBuZXcgVG9rZW5JdGVyYXRvcihzZXNzaW9uLCBjdXJzb3Iucm93LCBjdXJzb3IuY29sdW1uICsgMSk7CiAgICAgICAgaWYgKCF0aGlzLiRtYXRjaFRva2VuVHlwZShpdGVyYXRvcjIuZ2V0Q3VycmVudFRva2VuKCkgfHwgInRleHQiLCBTQUZFX0lOU0VSVF9JTl9UT0tFTlMpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpdGVyYXRvci5zdGVwRm9yd2FyZCgpOwogICAgcmV0dXJuIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpICE9PSBjdXJzb3Iucm93IHx8CiAgICAgICAgdGhpcy4kbWF0Y2hUb2tlblR5cGUoaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuKCkgfHwgInRleHQiLCBTQUZFX0lOU0VSVF9CRUZPUkVfVE9LRU5TKTsKfTsKCkNzdHlsZUJlaGF2aW91ci4kbWF0Y2hUb2tlblR5cGUgPSBmdW5jdGlvbih0b2tlbiwgdHlwZXMpIHsKICAgIHJldHVybiB0eXBlcy5pbmRleE9mKHRva2VuLnR5cGUgfHwgdG9rZW4pID4gLTE7Cn07CgpDc3R5bGVCZWhhdmlvdXIucmVjb3JkQXV0b0luc2VydCA9IGZ1bmN0aW9uKGVkaXRvciwgc2Vzc2lvbiwgYnJhY2tldCkgewogICAgdmFyIGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3JQb3NpdGlvbigpOwogICAgdmFyIGxpbmUgPSBzZXNzaW9uLmRvYy5nZXRMaW5lKGN1cnNvci5yb3cpOwogICAgaWYgKCF0aGlzLmlzQXV0b0luc2VydGVkQ2xvc2luZyhjdXJzb3IsIGxpbmUsIGNvbnRleHQuYXV0b0luc2VydGVkTGluZUVuZFswXSkpCiAgICAgICAgY29udGV4dC5hdXRvSW5zZXJ0ZWRCcmFja2V0cyA9IDA7CiAgICBjb250ZXh0LmF1dG9JbnNlcnRlZFJvdyA9IGN1cnNvci5yb3c7CiAgICBjb250ZXh0LmF1dG9JbnNlcnRlZExpbmVFbmQgPSBicmFja2V0ICsgbGluZS5zdWJzdHIoY3Vyc29yLmNvbHVtbik7CiAgICBjb250ZXh0LmF1dG9JbnNlcnRlZEJyYWNrZXRzKys7Cn07CgpDc3R5bGVCZWhhdmlvdXIucmVjb3JkTWF5YmVJbnNlcnQgPSBmdW5jdGlvbihlZGl0b3IsIHNlc3Npb24sIGJyYWNrZXQpIHsKICAgIHZhciBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yUG9zaXRpb24oKTsKICAgIHZhciBsaW5lID0gc2Vzc2lvbi5kb2MuZ2V0TGluZShjdXJzb3Iucm93KTsKICAgIGlmICghdGhpcy5pc01heWJlSW5zZXJ0ZWRDbG9zaW5nKGN1cnNvciwgbGluZSkpCiAgICAgICAgY29udGV4dC5tYXliZUluc2VydGVkQnJhY2tldHMgPSAwOwogICAgY29udGV4dC5tYXliZUluc2VydGVkUm93ID0gY3Vyc29yLnJvdzsKICAgIGNvbnRleHQubWF5YmVJbnNlcnRlZExpbmVTdGFydCA9IGxpbmUuc3Vic3RyKDAsIGN1cnNvci5jb2x1bW4pICsgYnJhY2tldDsKICAgIGNvbnRleHQubWF5YmVJbnNlcnRlZExpbmVFbmQgPSBsaW5lLnN1YnN0cihjdXJzb3IuY29sdW1uKTsKICAgIGNvbnRleHQubWF5YmVJbnNlcnRlZEJyYWNrZXRzKys7Cn07CgpDc3R5bGVCZWhhdmlvdXIuaXNBdXRvSW5zZXJ0ZWRDbG9zaW5nID0gZnVuY3Rpb24oY3Vyc29yLCBsaW5lLCBicmFja2V0KSB7CiAgICByZXR1cm4gY29udGV4dC5hdXRvSW5zZXJ0ZWRCcmFja2V0cyA+IDAgJiYKICAgICAgICBjdXJzb3Iucm93ID09PSBjb250ZXh0LmF1dG9JbnNlcnRlZFJvdyAmJgogICAgICAgIGJyYWNrZXQgPT09IGNvbnRleHQuYXV0b0luc2VydGVkTGluZUVuZFswXSAmJgogICAgICAgIGxpbmUuc3Vic3RyKGN1cnNvci5jb2x1bW4pID09PSBjb250ZXh0LmF1dG9JbnNlcnRlZExpbmVFbmQ7Cn07CgpDc3R5bGVCZWhhdmlvdXIuaXNNYXliZUluc2VydGVkQ2xvc2luZyA9IGZ1bmN0aW9uKGN1cnNvciwgbGluZSkgewogICAgcmV0dXJuIGNvbnRleHQubWF5YmVJbnNlcnRlZEJyYWNrZXRzID4gMCAmJgogICAgICAgIGN1cnNvci5yb3cgPT09IGNvbnRleHQubWF5YmVJbnNlcnRlZFJvdyAmJgogICAgICAgIGxpbmUuc3Vic3RyKGN1cnNvci5jb2x1bW4pID09PSBjb250ZXh0Lm1heWJlSW5zZXJ0ZWRMaW5lRW5kICYmCiAgICAgICAgbGluZS5zdWJzdHIoMCwgY3Vyc29yLmNvbHVtbikgPT0gY29udGV4dC5tYXliZUluc2VydGVkTGluZVN0YXJ0Owp9OwoKQ3N0eWxlQmVoYXZpb3VyLnBvcEF1dG9JbnNlcnRlZENsb3NpbmcgPSBmdW5jdGlvbigpIHsKICAgIGNvbnRleHQuYXV0b0luc2VydGVkTGluZUVuZCA9IGNvbnRleHQuYXV0b0luc2VydGVkTGluZUVuZC5zdWJzdHIoMSk7CiAgICBjb250ZXh0LmF1dG9JbnNlcnRlZEJyYWNrZXRzLS07Cn07CgpDc3R5bGVCZWhhdmlvdXIuY2xlYXJNYXliZUluc2VydGVkQ2xvc2luZyA9IGZ1bmN0aW9uKCkgewogICAgaWYgKGNvbnRleHQpIHsKICAgICAgICBjb250ZXh0Lm1heWJlSW5zZXJ0ZWRCcmFja2V0cyA9IDA7CiAgICAgICAgY29udGV4dC5tYXliZUluc2VydGVkUm93ID0gLTE7CiAgICB9Cn07CgoKCm9vcC5pbmhlcml0cyhDc3R5bGVCZWhhdmlvdXIsIEJlaGF2aW91cik7CgpleHBvcnRzLkNzdHlsZUJlaGF2aW91ciA9IENzdHlsZUJlaGF2aW91cjsKfSk7CgphY2UuZGVmaW5lKCJhY2UvbW9kZS9mb2xkaW5nL2NzdHlsZSIsWyJyZXF1aXJlIiwiZXhwb3J0cyIsIm1vZHVsZSIsImFjZS9saWIvb29wIiwiYWNlL3JhbmdlIiwiYWNlL21vZGUvZm9sZGluZy9mb2xkX21vZGUiXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7CiJ1c2Ugc3RyaWN0IjsKCnZhciBvb3AgPSByZXF1aXJlKCIuLi8uLi9saWIvb29wIik7CnZhciBSYW5nZSA9IHJlcXVpcmUoIi4uLy4uL3JhbmdlIikuUmFuZ2U7CnZhciBCYXNlRm9sZE1vZGUgPSByZXF1aXJlKCIuL2ZvbGRfbW9kZSIpLkZvbGRNb2RlOwoKdmFyIEZvbGRNb2RlID0gZXhwb3J0cy5Gb2xkTW9kZSA9IGZ1bmN0aW9uKGNvbW1lbnRSZWdleCkgewogICAgaWYgKGNvbW1lbnRSZWdleCkgewogICAgICAgIHRoaXMuZm9sZGluZ1N0YXJ0TWFya2VyID0gbmV3IFJlZ0V4cCgKICAgICAgICAgICAgdGhpcy5mb2xkaW5nU3RhcnRNYXJrZXIuc291cmNlLnJlcGxhY2UoL1x8W158XSo/JC8sICJ8IiArIGNvbW1lbnRSZWdleC5zdGFydCkKICAgICAgICApOwogICAgICAgIHRoaXMuZm9sZGluZ1N0b3BNYXJrZXIgPSBuZXcgUmVnRXhwKAogICAgICAgICAgICB0aGlzLmZvbGRpbmdTdG9wTWFya2VyLnNvdXJjZS5yZXBsYWNlKC9cfFtefF0qPyQvLCAifCIgKyBjb21tZW50UmVnZXguZW5kKQogICAgICAgICk7CiAgICB9Cn07Cm9vcC5pbmhlcml0cyhGb2xkTW9kZSwgQmFzZUZvbGRNb2RlKTsKCihmdW5jdGlvbigpIHsKICAgIAogICAgdGhpcy5mb2xkaW5nU3RhcnRNYXJrZXIgPSAvKFx7fFxbKVteXH1cXV0qJHxeXHMqKFwvXCopLzsKICAgIHRoaXMuZm9sZGluZ1N0b3BNYXJrZXIgPSAvXlteXFtce10qKFx9fFxdKXxeW1xzXCpdKihcKlwvKS87CiAgICB0aGlzLnNpbmdsZUxpbmVCbG9ja0NvbW1lbnRSZT0gL15ccyooXC9cKikuKlwqXC9ccyokLzsKICAgIHRoaXMudHJpcGxlU3RhckJsb2NrQ29tbWVudFJlID0gL15ccyooXC9cKlwqXCopLipcKlwvXHMqJC87CiAgICB0aGlzLnN0YXJ0UmVnaW9uUmUgPSAvXlxzKihcL1wqfFwvXC8pIz9yZWdpb25cYi87CiAgICB0aGlzLl9nZXRGb2xkV2lkZ2V0QmFzZSA9IHRoaXMuZ2V0Rm9sZFdpZGdldDsKICAgIHRoaXMuZ2V0Rm9sZFdpZGdldCA9IGZ1bmN0aW9uKHNlc3Npb24sIGZvbGRTdHlsZSwgcm93KSB7CiAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmdldExpbmUocm93KTsKICAgIAogICAgICAgIGlmICh0aGlzLnNpbmdsZUxpbmVCbG9ja0NvbW1lbnRSZS50ZXN0KGxpbmUpKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5zdGFydFJlZ2lvblJlLnRlc3QobGluZSkgJiYgIXRoaXMudHJpcGxlU3RhckJsb2NrQ29tbWVudFJlLnRlc3QobGluZSkpCiAgICAgICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgfQogICAgCiAgICAgICAgdmFyIGZ3ID0gdGhpcy5fZ2V0Rm9sZFdpZGdldEJhc2Uoc2Vzc2lvbiwgZm9sZFN0eWxlLCByb3cpOwogICAgCiAgICAgICAgaWYgKCFmdyAmJiB0aGlzLnN0YXJ0UmVnaW9uUmUudGVzdChsaW5lKSkKICAgICAgICAgICAgcmV0dXJuICJzdGFydCI7IC8vIGxpbmVDb21tZW50UmVnaW9uU3RhcnQKICAgIAogICAgICAgIHJldHVybiBmdzsKICAgIH07CgogICAgdGhpcy5nZXRGb2xkV2lkZ2V0UmFuZ2UgPSBmdW5jdGlvbihzZXNzaW9uLCBmb2xkU3R5bGUsIHJvdywgZm9yY2VNdWx0aWxpbmUpIHsKICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZ2V0TGluZShyb3cpOwogICAgICAgIAogICAgICAgIGlmICh0aGlzLnN0YXJ0UmVnaW9uUmUudGVzdChsaW5lKSkKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29tbWVudFJlZ2lvbkJsb2NrKHNlc3Npb24sIGxpbmUsIHJvdyk7CiAgICAgICAgCiAgICAgICAgdmFyIG1hdGNoID0gbGluZS5tYXRjaCh0aGlzLmZvbGRpbmdTdGFydE1hcmtlcik7CiAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgIHZhciBpID0gbWF0Y2guaW5kZXg7CgogICAgICAgICAgICBpZiAobWF0Y2hbMV0pCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcGVuaW5nQnJhY2tldEJsb2NrKHNlc3Npb24sIG1hdGNoWzFdLCByb3csIGkpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciByYW5nZSA9IHNlc3Npb24uZ2V0Q29tbWVudEZvbGRSYW5nZShyb3csIGkgKyBtYXRjaFswXS5sZW5ndGgsIDEpOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKHJhbmdlICYmICFyYW5nZS5pc011bHRpTGluZSgpKSB7CiAgICAgICAgICAgICAgICBpZiAoZm9yY2VNdWx0aWxpbmUpIHsKICAgICAgICAgICAgICAgICAgICByYW5nZSA9IHRoaXMuZ2V0U2VjdGlvblJhbmdlKHNlc3Npb24sIHJvdyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZvbGRTdHlsZSAhPSAiYWxsIikKICAgICAgICAgICAgICAgICAgICByYW5nZSA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiByYW5nZTsKICAgICAgICB9CgogICAgICAgIGlmIChmb2xkU3R5bGUgPT09ICJtYXJrYmVnaW4iKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIHZhciBtYXRjaCA9IGxpbmUubWF0Y2godGhpcy5mb2xkaW5nU3RvcE1hcmtlcik7CiAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgIHZhciBpID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7CgogICAgICAgICAgICBpZiAobWF0Y2hbMV0pCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zaW5nQnJhY2tldEJsb2NrKHNlc3Npb24sIG1hdGNoWzFdLCByb3csIGkpOwoKICAgICAgICAgICAgcmV0dXJuIHNlc3Npb24uZ2V0Q29tbWVudEZvbGRSYW5nZShyb3csIGksIC0xKTsKICAgICAgICB9CiAgICB9OwogICAgCiAgICB0aGlzLmdldFNlY3Rpb25SYW5nZSA9IGZ1bmN0aW9uKHNlc3Npb24sIHJvdykgewogICAgICAgIHZhciBsaW5lID0gc2Vzc2lvbi5nZXRMaW5lKHJvdyk7CiAgICAgICAgdmFyIHN0YXJ0SW5kZW50ID0gbGluZS5zZWFyY2goL1xTLyk7CiAgICAgICAgdmFyIHN0YXJ0Um93ID0gcm93OwogICAgICAgIHZhciBzdGFydENvbHVtbiA9IGxpbmUubGVuZ3RoOwogICAgICAgIHJvdyA9IHJvdyArIDE7CiAgICAgICAgdmFyIGVuZFJvdyA9IHJvdzsKICAgICAgICB2YXIgbWF4Um93ID0gc2Vzc2lvbi5nZXRMZW5ndGgoKTsKICAgICAgICB3aGlsZSAoKytyb3cgPCBtYXhSb3cpIHsKICAgICAgICAgICAgbGluZSA9IHNlc3Npb24uZ2V0TGluZShyb3cpOwogICAgICAgICAgICB2YXIgaW5kZW50ID0gbGluZS5zZWFyY2goL1xTLyk7CiAgICAgICAgICAgIGlmIChpbmRlbnQgPT09IC0xKQogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIGlmICAoc3RhcnRJbmRlbnQgPiBpbmRlbnQpCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgdmFyIHN1YlJhbmdlID0gdGhpcy5nZXRGb2xkV2lkZ2V0UmFuZ2Uoc2Vzc2lvbiwgImFsbCIsIHJvdyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoc3ViUmFuZ2UpIHsKICAgICAgICAgICAgICAgIGlmIChzdWJSYW5nZS5zdGFydC5yb3cgPD0gc3RhcnRSb3cpIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViUmFuZ2UuaXNNdWx0aUxpbmUoKSkgewogICAgICAgICAgICAgICAgICAgIHJvdyA9IHN1YlJhbmdlLmVuZC5yb3c7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0SW5kZW50ID09IGluZGVudCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVuZFJvdyA9IHJvdzsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIG5ldyBSYW5nZShzdGFydFJvdywgc3RhcnRDb2x1bW4sIGVuZFJvdywgc2Vzc2lvbi5nZXRMaW5lKGVuZFJvdykubGVuZ3RoKTsKICAgIH07CiAgICB0aGlzLmdldENvbW1lbnRSZWdpb25CbG9jayA9IGZ1bmN0aW9uKHNlc3Npb24sIGxpbmUsIHJvdykgewogICAgICAgIHZhciBzdGFydENvbHVtbiA9IGxpbmUuc2VhcmNoKC9ccyokLyk7CiAgICAgICAgdmFyIG1heFJvdyA9IHNlc3Npb24uZ2V0TGVuZ3RoKCk7CiAgICAgICAgdmFyIHN0YXJ0Um93ID0gcm93OwogICAgICAgIAogICAgICAgIHZhciByZSA9IC9eXHMqKD86XC9cKnxcL1wvfC0tKSM/KGVuZCk/cmVnaW9uXGIvOwogICAgICAgIHZhciBkZXB0aCA9IDE7CiAgICAgICAgd2hpbGUgKCsrcm93IDwgbWF4Um93KSB7CiAgICAgICAgICAgIGxpbmUgPSBzZXNzaW9uLmdldExpbmUocm93KTsKICAgICAgICAgICAgdmFyIG0gPSByZS5leGVjKGxpbmUpOwogICAgICAgICAgICBpZiAoIW0pIGNvbnRpbnVlOwogICAgICAgICAgICBpZiAobVsxXSkgZGVwdGgtLTsKICAgICAgICAgICAgZWxzZSBkZXB0aCsrOwoKICAgICAgICAgICAgaWYgKCFkZXB0aCkgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICB2YXIgZW5kUm93ID0gcm93OwogICAgICAgIGlmIChlbmRSb3cgPiBzdGFydFJvdykgewogICAgICAgICAgICByZXR1cm4gbmV3IFJhbmdlKHN0YXJ0Um93LCBzdGFydENvbHVtbiwgZW5kUm93LCBsaW5lLmxlbmd0aCk7CiAgICAgICAgfQogICAgfTsKCn0pLmNhbGwoRm9sZE1vZGUucHJvdG90eXBlKTsKCn0pOwoKYWNlLmRlZmluZSgiYWNlL21vZGUvamF2YXNjcmlwdCIsWyJyZXF1aXJlIiwiZXhwb3J0cyIsIm1vZHVsZSIsImFjZS9saWIvb29wIiwiYWNlL21vZGUvdGV4dCIsImFjZS9tb2RlL2phdmFzY3JpcHRfaGlnaGxpZ2h0X3J1bGVzIiwiYWNlL21vZGUvbWF0Y2hpbmdfYnJhY2Vfb3V0ZGVudCIsImFjZS9yYW5nZSIsImFjZS93b3JrZXIvd29ya2VyX2NsaWVudCIsImFjZS9tb2RlL2JlaGF2aW91ci9jc3R5bGUiLCJhY2UvbW9kZS9mb2xkaW5nL2NzdHlsZSJdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKInVzZSBzdHJpY3QiOwoKdmFyIG9vcCA9IHJlcXVpcmUoIi4uL2xpYi9vb3AiKTsKdmFyIFRleHRNb2RlID0gcmVxdWlyZSgiLi90ZXh0IikuTW9kZTsKdmFyIEphdmFTY3JpcHRIaWdobGlnaHRSdWxlcyA9IHJlcXVpcmUoIi4vamF2YXNjcmlwdF9oaWdobGlnaHRfcnVsZXMiKS5KYXZhU2NyaXB0SGlnaGxpZ2h0UnVsZXM7CnZhciBNYXRjaGluZ0JyYWNlT3V0ZGVudCA9IHJlcXVpcmUoIi4vbWF0Y2hpbmdfYnJhY2Vfb3V0ZGVudCIpLk1hdGNoaW5nQnJhY2VPdXRkZW50Owp2YXIgUmFuZ2UgPSByZXF1aXJlKCIuLi9yYW5nZSIpLlJhbmdlOwp2YXIgV29ya2VyQ2xpZW50ID0gcmVxdWlyZSgiLi4vd29ya2VyL3dvcmtlcl9jbGllbnQiKS5Xb3JrZXJDbGllbnQ7CnZhciBDc3R5bGVCZWhhdmlvdXIgPSByZXF1aXJlKCIuL2JlaGF2aW91ci9jc3R5bGUiKS5Dc3R5bGVCZWhhdmlvdXI7CnZhciBDU3R5bGVGb2xkTW9kZSA9IHJlcXVpcmUoIi4vZm9sZGluZy9jc3R5bGUiKS5Gb2xkTW9kZTsKCnZhciBNb2RlID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLkhpZ2hsaWdodFJ1bGVzID0gSmF2YVNjcmlwdEhpZ2hsaWdodFJ1bGVzOwogICAgCiAgICB0aGlzLiRvdXRkZW50ID0gbmV3IE1hdGNoaW5nQnJhY2VPdXRkZW50KCk7CiAgICB0aGlzLiRiZWhhdmlvdXIgPSBuZXcgQ3N0eWxlQmVoYXZpb3VyKCk7CiAgICB0aGlzLmZvbGRpbmdSdWxlcyA9IG5ldyBDU3R5bGVGb2xkTW9kZSgpOwp9Owpvb3AuaW5oZXJpdHMoTW9kZSwgVGV4dE1vZGUpOwoKKGZ1bmN0aW9uKCkgewoKICAgIHRoaXMubGluZUNvbW1lbnRTdGFydCA9ICIvLyI7CiAgICB0aGlzLmJsb2NrQ29tbWVudCA9IHtzdGFydDogIi8qIiwgZW5kOiAiKi8ifTsKCiAgICB0aGlzLmdldE5leHRMaW5lSW5kZW50ID0gZnVuY3Rpb24oc3RhdGUsIGxpbmUsIHRhYikgewogICAgICAgIHZhciBpbmRlbnQgPSB0aGlzLiRnZXRJbmRlbnQobGluZSk7CgogICAgICAgIHZhciB0b2tlbml6ZWRMaW5lID0gdGhpcy5nZXRUb2tlbml6ZXIoKS5nZXRMaW5lVG9rZW5zKGxpbmUsIHN0YXRlKTsKICAgICAgICB2YXIgdG9rZW5zID0gdG9rZW5pemVkTGluZS50b2tlbnM7CiAgICAgICAgdmFyIGVuZFN0YXRlID0gdG9rZW5pemVkTGluZS5zdGF0ZTsKCiAgICAgICAgaWYgKHRva2Vucy5sZW5ndGggJiYgdG9rZW5zW3Rva2Vucy5sZW5ndGgtMV0udHlwZSA9PSAiY29tbWVudCIpIHsKICAgICAgICAgICAgcmV0dXJuIGluZGVudDsKICAgICAgICB9CgogICAgICAgIGlmIChzdGF0ZSA9PSAic3RhcnQiIHx8IHN0YXRlID09ICJub19yZWdleCIpIHsKICAgICAgICAgICAgdmFyIG1hdGNoID0gbGluZS5tYXRjaCgvXi4qKD86XGJjYXNlXGIuKlw6fFtce1woXFtdKVxzKiQvKTsKICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICBpbmRlbnQgKz0gdGFiOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSAiZG9jLXN0YXJ0IikgewogICAgICAgICAgICBpZiAoZW5kU3RhdGUgPT0gInN0YXJ0IiB8fCBlbmRTdGF0ZSA9PSAibm9fcmVnZXgiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIG1hdGNoID0gbGluZS5tYXRjaCgvXlxzKihcLz8pXCovKTsKICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICBpZiAobWF0Y2hbMV0pIHsKICAgICAgICAgICAgICAgICAgICBpbmRlbnQgKz0gIiAiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaW5kZW50ICs9ICIqICI7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBpbmRlbnQ7CiAgICB9OwoKICAgIHRoaXMuY2hlY2tPdXRkZW50ID0gZnVuY3Rpb24oc3RhdGUsIGxpbmUsIGlucHV0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG91dGRlbnQuY2hlY2tPdXRkZW50KGxpbmUsIGlucHV0KTsKICAgIH07CgogICAgdGhpcy5hdXRvT3V0ZGVudCA9IGZ1bmN0aW9uKHN0YXRlLCBkb2MsIHJvdykgewogICAgICAgIHRoaXMuJG91dGRlbnQuYXV0b091dGRlbnQoZG9jLCByb3cpOwogICAgfTsKCiAgICB0aGlzLmNyZWF0ZVdvcmtlciA9IGZ1bmN0aW9uKHNlc3Npb24pIHsKICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlckNsaWVudChbImFjZSJdLCAiYWNlL21vZGUvamF2YXNjcmlwdF93b3JrZXIiLCAiSmF2YVNjcmlwdFdvcmtlciIpOwogICAgICAgIHdvcmtlci5hdHRhY2hUb0RvY3VtZW50KHNlc3Npb24uZ2V0RG9jdW1lbnQoKSk7CgogICAgICAgIHdvcmtlci5vbigiYW5ub3RhdGUiLCBmdW5jdGlvbihyZXN1bHRzKSB7CiAgICAgICAgICAgIHNlc3Npb24uc2V0QW5ub3RhdGlvbnMocmVzdWx0cy5kYXRhKTsKICAgICAgICB9KTsKCiAgICAgICAgd29ya2VyLm9uKCJ0ZXJtaW5hdGUiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2Vzc2lvbi5jbGVhckFubm90YXRpb25zKCk7CiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiB3b3JrZXI7CiAgICB9OwoKICAgIHRoaXMuJGlkID0gImFjZS9tb2RlL2phdmFzY3JpcHQiOwp9KS5jYWxsKE1vZGUucHJvdG90eXBlKTsKCmV4cG9ydHMuTW9kZSA9IE1vZGU7Cn0pOwoKYWNlLmRlZmluZSgiYWNlL21vZGUvamF2YV9oaWdobGlnaHRfcnVsZXMiLFsicmVxdWlyZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJhY2UvbGliL29vcCIsImFjZS9tb2RlL2RvY19jb21tZW50X2hpZ2hsaWdodF9ydWxlcyIsImFjZS9tb2RlL3RleHRfaGlnaGxpZ2h0X3J1bGVzIl0sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewoidXNlIHN0cmljdCI7Cgp2YXIgb29wID0gcmVxdWlyZSgiLi4vbGliL29vcCIpOwp2YXIgRG9jQ29tbWVudEhpZ2hsaWdodFJ1bGVzID0gcmVxdWlyZSgiLi9kb2NfY29tbWVudF9oaWdobGlnaHRfcnVsZXMiKS5Eb2NDb21tZW50SGlnaGxpZ2h0UnVsZXM7CnZhciBUZXh0SGlnaGxpZ2h0UnVsZXMgPSByZXF1aXJlKCIuL3RleHRfaGlnaGxpZ2h0X3J1bGVzIikuVGV4dEhpZ2hsaWdodFJ1bGVzOwoKdmFyIEphdmFIaWdobGlnaHRSdWxlcyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGtleXdvcmRzID0gKAogICAgImFic3RyYWN0fGNvbnRpbnVlfGZvcnxuZXd8c3dpdGNofCIgKwogICAgImFzc2VydHxkZWZhdWx0fGdvdG98cGFja2FnZXxzeW5jaHJvbml6ZWR8IiArCiAgICAiYm9vbGVhbnxkb3xpZnxwcml2YXRlfHRoaXN8IiArCiAgICAiYnJlYWt8ZG91YmxlfGltcGxlbWVudHN8cHJvdGVjdGVkfHRocm93fCIgKwogICAgImJ5dGV8ZWxzZXxpbXBvcnR8cHVibGljfHRocm93c3wiICsKICAgICJjYXNlfGVudW18aW5zdGFuY2VvZnxyZXR1cm58dHJhbnNpZW50fCIgKwogICAgImNhdGNofGV4dGVuZHN8aW50fHNob3J0fHRyeXwiICsKICAgICJjaGFyfGZpbmFsfGludGVyZmFjZXxzdGF0aWN8dm9pZHwiICsKICAgICJjbGFzc3xmaW5hbGx5fGxvbmd8c3RyaWN0ZnB8dm9sYXRpbGV8IiArCiAgICAiY29uc3R8ZmxvYXR8bmF0aXZlfHN1cGVyfHdoaWxlIgogICAgKTsKCiAgICB2YXIgYnVpbGRpbkNvbnN0YW50cyA9ICgibnVsbHxJbmZpbml0eXxOYU58dW5kZWZpbmVkIik7CgoKICAgIHZhciBsYW5nQ2xhc3NlcyA9ICgKICAgICAgICAiQWJzdHJhY3RNZXRob2RFcnJvcnxBc3NlcnRpb25FcnJvcnxDbGFzc0NpcmN1bGFyaXR5RXJyb3J8IisKICAgICAgICAiQ2xhc3NGb3JtYXRFcnJvcnxEZXByZWNhdGVkfEVudW1Db25zdGFudE5vdFByZXNlbnRFeGNlcHRpb258IisKICAgICAgICAiRXhjZXB0aW9uSW5Jbml0aWFsaXplckVycm9yfElsbGVnYWxBY2Nlc3NFcnJvcnwiKwogICAgICAgICJJbGxlZ2FsVGhyZWFkU3RhdGVFeGNlcHRpb258SW5zdGFudGlhdGlvbkVycm9yfEludGVybmFsRXJyb3J8IisKICAgICAgICAiTmVnYXRpdmVBcnJheVNpemVFeGNlcHRpb258Tm9TdWNoRmllbGRFcnJvcnxPdmVycmlkZXxQcm9jZXNzfCIrCiAgICAgICAgIlByb2Nlc3NCdWlsZGVyfFNlY3VyaXR5TWFuYWdlcnxTdHJpbmdJbmRleE91dE9mQm91bmRzRXhjZXB0aW9ufCIrCiAgICAgICAgIlN1cHByZXNzV2FybmluZ3N8VHlwZU5vdFByZXNlbnRFeGNlcHRpb258VW5rbm93bkVycm9yfCIrCiAgICAgICAgIlVuc2F0aXNmaWVkTGlua0Vycm9yfFVuc3VwcG9ydGVkQ2xhc3NWZXJzaW9uRXJyb3J8VmVyaWZ5RXJyb3J8IisKICAgICAgICAiSW5zdGFudGlhdGlvbkV4Y2VwdGlvbnxJbmRleE91dE9mQm91bmRzRXhjZXB0aW9ufCIrCiAgICAgICAgIkFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbnxDbG9uZU5vdFN1cHBvcnRlZEV4Y2VwdGlvbnwiKwogICAgICAgICJOb1N1Y2hGaWVsZEV4Y2VwdGlvbnxJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb258TnVtYmVyRm9ybWF0RXhjZXB0aW9ufCIrCiAgICAgICAgIlNlY3VyaXR5RXhjZXB0aW9ufFZvaWR8SW5oZXJpdGFibGVUaHJlYWRMb2NhbHxJbGxlZ2FsU3RhdGVFeGNlcHRpb258IisKICAgICAgICAiSW50ZXJydXB0ZWRFeGNlcHRpb258Tm9TdWNoTWV0aG9kRXhjZXB0aW9ufElsbGVnYWxBY2Nlc3NFeGNlcHRpb258IisKICAgICAgICAiVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb258RW51bXxTdHJpY3RNYXRofFBhY2thZ2V8Q29tcGlsZXJ8IisKICAgICAgICAiUmVhZGFibGV8UnVudGltZXxTdHJpbmdCdWlsZGVyfE1hdGh8SW5jb21wYXRpYmxlQ2xhc3NDaGFuZ2VFcnJvcnwiKwogICAgICAgICJOb1N1Y2hNZXRob2RFcnJvcnxUaHJlYWRMb2NhbHxSdW50aW1lUGVybWlzc2lvbnxBcml0aG1ldGljRXhjZXB0aW9ufCIrCiAgICAgICAgIk51bGxQb2ludGVyRXhjZXB0aW9ufExvbmd8SW50ZWdlcnxTaG9ydHxCeXRlfERvdWJsZXxOdW1iZXJ8RmxvYXR8IisKICAgICAgICAiQ2hhcmFjdGVyfEJvb2xlYW58U3RhY2tUcmFjZUVsZW1lbnR8QXBwZW5kYWJsZXxTdHJpbmdCdWZmZXJ8IisKICAgICAgICAiSXRlcmFibGV8VGhyZWFkR3JvdXB8UnVubmFibGV8VGhyZWFkfElsbGVnYWxNb25pdG9yU3RhdGVFeGNlcHRpb258IisKICAgICAgICAiU3RhY2tPdmVyZmxvd0Vycm9yfE91dE9mTWVtb3J5RXJyb3J8VmlydHVhbE1hY2hpbmVFcnJvcnwiKwogICAgICAgICJBcnJheVN0b3JlRXhjZXB0aW9ufENsYXNzQ2FzdEV4Y2VwdGlvbnxMaW5rYWdlRXJyb3J8IisKICAgICAgICAiTm9DbGFzc0RlZkZvdW5kRXJyb3J8Q2xhc3NOb3RGb3VuZEV4Y2VwdGlvbnxSdW50aW1lRXhjZXB0aW9ufCIrCiAgICAgICAgIkV4Y2VwdGlvbnxUaHJlYWREZWF0aHxFcnJvcnxUaHJvd2FibGV8U3lzdGVtfENsYXNzTG9hZGVyfCIrCiAgICAgICAgIkNsb25lYWJsZXxDbGFzc3xDaGFyU2VxdWVuY2V8Q29tcGFyYWJsZXxTdHJpbmd8T2JqZWN0IgogICAgKTsKCiAgICB2YXIga2V5d29yZE1hcHBlciA9IHRoaXMuY3JlYXRlS2V5d29yZE1hcHBlcih7CiAgICAgICAgInZhcmlhYmxlLmxhbmd1YWdlIjogInRoaXMiLAogICAgICAgICJrZXl3b3JkIjoga2V5d29yZHMsCiAgICAgICAgImNvbnN0YW50Lmxhbmd1YWdlIjogYnVpbGRpbkNvbnN0YW50cywKICAgICAgICAic3VwcG9ydC5mdW5jdGlvbiI6IGxhbmdDbGFzc2VzCiAgICB9LCAiaWRlbnRpZmllciIpOwoKICAgIHRoaXMuJHJ1bGVzID0gewogICAgICAgICJzdGFydCIgOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRva2VuIDogImNvbW1lbnQiLAogICAgICAgICAgICAgICAgcmVnZXggOiAiXFwvXFwvLiokIgogICAgICAgICAgICB9LAogICAgICAgICAgICBEb2NDb21tZW50SGlnaGxpZ2h0UnVsZXMuZ2V0U3RhcnRSdWxlKCJkb2Mtc3RhcnQiKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9rZW4gOiAiY29tbWVudCIsIC8vIG11bHRpIGxpbmUgY29tbWVudAogICAgICAgICAgICAgICAgcmVnZXggOiAiXFwvXFwqIiwKICAgICAgICAgICAgICAgIG5leHQgOiAiY29tbWVudCIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdG9rZW4gOiAic3RyaW5nIiwgLy8gc2luZ2xlIGxpbmUKICAgICAgICAgICAgICAgIHJlZ2V4IDogJ1siXSg/Oig/OlxcXFwuKXwoPzpbXiJcXFxcXSkpKj9bIl0nCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuIDogInN0cmluZyIsIC8vIHNpbmdsZSBsaW5lCiAgICAgICAgICAgICAgICByZWdleCA6ICJbJ10oPzooPzpcXFxcLil8KD86W14nXFxcXF0pKSo/WyddIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJjb25zdGFudC5udW1lcmljIiwgLy8gaGV4CiAgICAgICAgICAgICAgICByZWdleCA6IC8wKD86W3hYXVswLTlhLWZBLUZdWzAtOWEtZkEtRl9dKnxbYkJdWzAxXVswMV9dKilbTGxTc0RkRmZZeV0/XGIvCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuIDogImNvbnN0YW50Lm51bWVyaWMiLCAvLyBmbG9hdAogICAgICAgICAgICAgICAgcmVnZXggOiAvWystXT9cZFtcZF9dKig/Oig/OlwuW1xkX10qKT8oPzpbZUVdWystXT9bXGRfXSspPyk/W0xsU3NEZEZmWXldP1xiLwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJjb25zdGFudC5sYW5ndWFnZS5ib29sZWFuIiwKICAgICAgICAgICAgICAgIHJlZ2V4IDogIig/OnRydWV8ZmFsc2UpXFxiIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6IGtleXdvcmRNYXBwZXIsCiAgICAgICAgICAgICAgICByZWdleCA6ICJbYS16QS1aXyRdW2EtekEtWjAtOV8kXSpcXGIiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuIDogImtleXdvcmQub3BlcmF0b3IiLAogICAgICAgICAgICAgICAgcmVnZXggOiAiIXxcXCR8JXwmfFxcKnxcXC1cXC18XFwtfFxcK1xcK3xcXCt8fnw9PT18PT18PXwhPXwhPT18PD18Pj18PDw9fD4+PXw+Pj49fDw+fDx8PnwhfCYmfFxcfFxcfHxcXD9cXDp8XFwqPXwlPXxcXCs9fFxcLT18Jj18XFxePXxcXGIoPzppbnxpbnN0YW5jZW9mfG5ld3xkZWxldGV8dHlwZW9mfHZvaWQpIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJscGFyZW4iLAogICAgICAgICAgICAgICAgcmVnZXggOiAiW1soe10iCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuIDogInJwYXJlbiIsCiAgICAgICAgICAgICAgICByZWdleCA6ICJbXFxdKX1dIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0b2tlbiA6ICJ0ZXh0IiwKICAgICAgICAgICAgICAgIHJlZ2V4IDogIlxccysiCiAgICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgICJjb21tZW50IiA6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9rZW4gOiAiY29tbWVudCIsIC8vIGNsb3NpbmcgY29tbWVudAogICAgICAgICAgICAgICAgcmVnZXggOiAiLio/XFwqXFwvIiwKICAgICAgICAgICAgICAgIG5leHQgOiAic3RhcnQiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRva2VuIDogImNvbW1lbnQiLCAvLyBjb21tZW50IHNwYW5uaW5nIHdob2xlIGxpbmUKICAgICAgICAgICAgICAgIHJlZ2V4IDogIi4rIgogICAgICAgICAgICB9CiAgICAgICAgXQogICAgfTsKCiAgICB0aGlzLmVtYmVkUnVsZXMoRG9jQ29tbWVudEhpZ2hsaWdodFJ1bGVzLCAiZG9jLSIsCiAgICAgICAgWyBEb2NDb21tZW50SGlnaGxpZ2h0UnVsZXMuZ2V0RW5kUnVsZSgic3RhcnQiKSBdKTsKfTsKCm9vcC5pbmhlcml0cyhKYXZhSGlnaGxpZ2h0UnVsZXMsIFRleHRIaWdobGlnaHRSdWxlcyk7CgpleHBvcnRzLkphdmFIaWdobGlnaHRSdWxlcyA9IEphdmFIaWdobGlnaHRSdWxlczsKfSk7CgphY2UuZGVmaW5lKCJhY2UvbW9kZS9qYXZhIixbInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIiwiYWNlL2xpYi9vb3AiLCJhY2UvbW9kZS9qYXZhc2NyaXB0IiwiYWNlL21vZGUvamF2YV9oaWdobGlnaHRfcnVsZXMiXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7CiJ1c2Ugc3RyaWN0IjsKCnZhciBvb3AgPSByZXF1aXJlKCIuLi9saWIvb29wIik7CnZhciBKYXZhU2NyaXB0TW9kZSA9IHJlcXVpcmUoIi4vamF2YXNjcmlwdCIpLk1vZGU7CnZhciBKYXZhSGlnaGxpZ2h0UnVsZXMgPSByZXF1aXJlKCIuL2phdmFfaGlnaGxpZ2h0X3J1bGVzIikuSmF2YUhpZ2hsaWdodFJ1bGVzOwoKdmFyIE1vZGUgPSBmdW5jdGlvbigpIHsKICAgIEphdmFTY3JpcHRNb2RlLmNhbGwodGhpcyk7CiAgICB0aGlzLkhpZ2hsaWdodFJ1bGVzID0gSmF2YUhpZ2hsaWdodFJ1bGVzOwp9Owpvb3AuaW5oZXJpdHMoTW9kZSwgSmF2YVNjcmlwdE1vZGUpOwoKKGZ1bmN0aW9uKCkgewogICAgCiAgICB0aGlzLmNyZWF0ZVdvcmtlciA9IGZ1bmN0aW9uKHNlc3Npb24pIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH07CgogICAgdGhpcy4kaWQgPSAiYWNlL21vZGUvamF2YSI7Cn0pLmNhbGwoTW9kZS5wcm90b3R5cGUpOwoKZXhwb3J0cy5Nb2RlID0gTW9kZTsKfSk7Cg==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="2531674266" offset="0" length="9073" />
        <PacketInfo time="2531674282" offset="9073" length="2754" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>